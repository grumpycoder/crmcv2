!function(){var t=angular.module("app",["ngComponentRouter","ngAnimate","ui.bootstrap","ngMessages","onScreenKeyboard","utils.autofocus","treasure-overlay-spinner","LocalStorageModule"]);t.component("kiosk",{template:"<ng-outlet>Loading ..</ng-outlet >",$routeConfig:[{path:"/",name:"Welcome",component:"welcome",useAsDefault:!0},{path:"/register",name:"Register",component:"register"},{path:"/pledge",name:"Pledge",component:"pledge"},{path:"/finish",name:"Finish",component:"finish"},{path:"/search",name:"Search",component:"search"},{path:"/results",name:"Results",component:"results"},{path:"/settings",name:"Settings",component:"settings"}]}),t.value("$routerRootComponent","kiosk"),t.value("config",{host:window.location.hostname,apiUrlBase:"http://localhost:49960/api/",apiUrl:"http://localhost:49960/api/visitor",hubUrl:"http://localhost:49960/signalr",redirectTimeout:3e4,finishTimeout:4,kiosk:1}),t.run(["config",function(t){switch(t.host){case"crmckiosk":t.apiUrlBase="http://crmc/api/",t.apiUrl="http://crmc/api/visitor",t.hubUrl="http://crmc/signalr";break;case"crmckiosk-test.splcenter.org":t.apiUrlBase="http://crmc-test/api/",t.apiUrl="http://crmc-test/api/visitor",t.hubUrl="http://crmc-test/signalr";break;case"crmckiosk.splcenter.org":t.apiUrlBase="http://crmc/api/",t.apiUrl="http://crmc/api/visitor",t.hubUrl="http://crmc/signalr"}}])}();
!function(){function n(n,o,t,i){var e,c=this;c.$onInit=function(){console.log("finish init",n),c.kiosk=i.get("kiosk")||1,$.connection.hub.url=n.hubUrl,e=$.connection.nameNotificationHub,c.countDown_tick=n.finishTimeout,c.startTimer()},this.$routerOnActivate=function(n){c.$router=this.$router},c.startTimer=function(){c.countDown_tick<=0?(console.log("timer finished"),$.connection.hub.start().done(function(){console.log("hub connection started"),e.server.addName(c.kiosk,o.get())}),c.$router.navigate(["Welcome"])):(c.countDown_tick--,t(c.startTimer,1e3))}}var o=angular.module("app");o.component("finish",{bindings:{$router:"<"},templateUrl:"app/finish.component.html",controller:["config","visitorService","$timeout","localStorageService",n]})}();
!function(){function e(e,t,n){var i,o=this;o.$onInit=function(){console.log("pledge init"),o.visitor=n.get(),o.startTimer()},this.$routerOnActivate=function(e,t){},o.gotoWelcome=function(){e.cancel(i),this.$router.navigate(["Welcome"])},o.gotoRegister=function(){e.cancel(i),n.getTerm().length>0?this.$router.navigate(["Results"]):this.$router.navigate(["Register"])},o.pledge=function(){n.get().id?console.log("returning visitor",n.get()):(console.log("save new visitor",n.get()),n.save()),e.cancel(i),this.$router.navigate(["Finish"])},o.startTimer=function(){e.cancel(i),i=e(function(){o.$router.navigate(["Welcome"])},t.redirectTimeout)}}var t=angular.module("app");t.component("pledge",{bindings:{$router:"<"},templateUrl:"app/pledge.component.html",controller:["$timeout","config","visitorService",e]})}();
!function(){function t(t,e,r,n,o,i){function a(){n.$watchCollection("$ctrl.visitor",function(t){if(void 0!==t.firstname){var e=t.firstname+t.lastname;if(e=e.replace(/ /g,""),e.length>0){var r=c(e.toUpperCase());u.form.lastname.$setValidity("blacklist",r)}}})}function c(t){for(var e=i.get(),r=0;r<e.length;r++)if(t.match((".*"+e[r].trim()+".*").replace(" ",".*")))return!1;return!0}var l,u=this;u.$onInit=function(){u.visitor=e.get(),o.get(t.apiUrlBase+"censor").then(function(e){return o.get(t.apiUrlBase+"censor").then(function(t){var e=[];t.data.length>0&&t.data.forEach(function(t){null!==t.word&&e.push(t.word.replace(/ /g,"").toUpperCase())}),i.set(e)})}),a(),u.startTimer()},this.$routerOnActivate=function(t){u.$router=this.$router},u.gotoWelcome=function(){r.cancel(l),this.$router.navigate(["Welcome"])},u.gotoPledge=function(){r.cancel(l),this.$router.navigate(["Pledge"])},u.startTimer=function(){r.cancel(l),l=r(function(){u.$router.navigate(["Welcome"])},t.redirectTimeout)}}var e=angular.module("app");e.component("register",{bindings:{$router:"<"},templateUrl:"app/register.component.html",controller:["config","visitorService","$timeout","$scope","$http","censorService",t]})}();
!function(){function e(e,t,n){var o,r,a=this,i=10;a.searchModel={page:1,pageSize:i},a.paging={currentPage:1},a.$onInit=function(){console.log("search init");const e=n.getTerm().split(" ");e.length>1?(a.searchModel.firstname=e[0],a.searchModel.lastname=e[1]):a.searchModel.lastname=e[0],a.search()},a.gotoWelcome=function(){t.cancel(o),this.$router.navigate(["Welcome"])},a.gotoSearch=function(){t.cancel(o),this.$router.navigate(["Search"])},a.pledge=function(){t.cancel(o),this.$router.navigate(["Pledge"])},a.toggleName=function(e){a.visitor=e,n.set(e),a.startTimer()},a.search=function(e){return r=e,a.loading=!0,n.search(a.searchModel).then(function(e){a.visitors=e.results,a.searchModel=e,delete a.searchModel.results,a.startTimer(),a.loading=!1})},a.paged=function(){a.visitor=null,a.search(r)},a.startTimer=function(){t.cancel(o),o=t(function(){a.$router.navigate(["Welcome"])},e.redirectTimeout)}}var t=angular.module("app");t.component("results",{bindings:{$router:"<"},templateUrl:"app/results.component.html",controller:["config","$timeout","visitorService",e]})}();
!function(){function e(e,t,n){var o,r=this;r.$onInit=function(){console.log("search init"),r.searchTerm=t.getTerm(),r.startTimer()},r.gotoWelcome=function(){n.cancel(o),this.$router.navigate(["Welcome"])},r.gotoSearchResults=function(){t.setTerm(r.searchTerm),n.cancel(o),this.$router.navigate(["Results"])},r.startTimer=function(){n.cancel(o),o=n(function(){r.$router.navigate(["Welcome"])},e.redirectTimeout)}}var t=angular.module("app");t.component("search",{bindings:{$router:"<"},templateUrl:"app/search.component.html",controller:["config","visitorService","$timeout",e]})}();
!function(){function o(o){var t=this;t.availableKiosks=[1,2,3,4],t.kiosk=1,t.$onInit=function(){console.log("settings init"),t.kiosk=o.get("kiosk")||1},this.$routerOnActivate=function(o){},t.gotoWelcome=function(){this.$router.navigate(["Welcome"])},t.kioskChange=function(){o.set("kiosk",t.kiosk)}}var t=angular.module("app");t.component("settings",{bindings:{$router:"<"},templateUrl:"app/settings.component.html",controller:["localStorageService",o]})}();
!function(){function t(t){var e=this,n="";e.$onInit=function(){console.log("welcome init"),t.clearTerm(),t.clear()},this.$routerOnActivate=function(t){},e.gotoRegister=function(){this.$router.navigate(["Register"])},e.gotoSearch=function(){this.$router.navigate(["Search"])},e.unlock=function(t){n.length>4?n=t:n+=t.toString(),"1212"===n&&this.$router.navigate(["Settings"])}}var e=angular.module("app");e.component("welcome",{bindings:{$router:"<"},templateUrl:"app/welcome.component.html",controller:["visitorService",t]})}();
angular.module("onScreenKeyboard",["ngSanitize"]).directive("onScreenKeyboard",["$timeout","$document",function(t,e){"use strict";return{restrict:"E",bindToController:!0,controllerAs:"ctrl",scope:{rows:"=?",uppercaseAllWords:"@"},controller:["$sce",function(t){var e=this;e.rows||(e.rows=[["1","2","3","4","5","6","7","8","9","0",{type:"erase",colspan:2,text:"&lArr;"}],["q","w","e","r","t","y","u","i","o","p","@"],["a","s","d","f","g","h","j","k","l","-","_",{type:"margin"}],[{type:"shift"},"z","x","c","v","b","n","m",",",".",{type:"shift"}],[{type:"margin"},{type:"space",colspan:9,text:" "}]]),e.getText=function(e){if("margin"===e.type)return"";if("shift"===e.type)return"&dArr;";var r=e.text||e;return r&&r.indexOf("&")>-1?t.trustAsHtml(r):r}}],link:function(r,n,s){var a=r.ctrl;n.bind("contextmenu",function(t){return t.preventDefault(),!1}),a.isUpperCase=!1,a.lastInputCtrl=null,a.startPos=null,a.endPos=null,a.printKeyStroke=function(t){if(a.lastInputCtrl){var e=angular.element(t.target||t.srcElement);if(e.hasClass("erase"))return void a.eraseKeyStroke();if(e.hasClass("shift"))return void a.inverseCase();var r=angular.element(a.lastInputCtrl),n=r.val(),s=n.substring(0,a.startPos),l=n.substring(a.endPos,n.length);r.val(s+e.text()+l),r.triggerHandler("change"),a.startPos++,a.endPos++,a.setKeyboardLayout()}},a.inverseCase=function(){},a.refocus=function(){a.lastInputCtrl.focus()},a.eraseKeyStroke=function(){if(a.lastInputCtrl){var t=a.startPos!==a.endPos,e=angular.element(a.lastInputCtrl),r=e.val(),n=r.substring(0,t?a.startPos:a.startPos-1),s=r.substring(a.endPos,r.length);e.val(n+s),e.triggerHandler("change"),t?a.endPos=a.startPos:(a.startPos--,a.endPos--),a.lastInputCtrl.selectionStart=a.startPos,a.lastInputCtrl.selectionEnd=a.startPos,a.setKeyboardLayout(),a.refocus()}},a.setKeyboardLayout=function(){return a.lastInputCtrl?void(a.lastInputCtrl.className&&a.isUpperCase?a.inverseCase():0===angular.element(a.lastInputCtrl).val().length?a.isUpperCase||(a.isUpperCase=!1,a.inverseCase()):" "===angular.element(a.lastInputCtrl).val().slice(-1)&&!a.isUpperCase&&s.hasOwnProperty("uppercaseAllWords")?a.inverseCase():(a.isUpperCase=!0,a.inverseCase())):(a.isUpperCase=!1,void a.inverseCase())},e.find("input").bind("blur focus",function(){a.setKeyboardLayout(),a.lastInputCtrl=this,a.lastInputCtrl&&"checkbox"!==a.lastInputCtrl.type&&(a.startPos=a.lastInputCtrl.selectionStart,a.endPos=a.lastInputCtrl.selectionEnd)}).bind("keydown",function(){a.startPos=a.lastInputCtrl.selectionStart,a.endPos=a.lastInputCtrl.selectionEnd}),t(function(){a.inverseCase()},0)},templateUrl:"/templates/angular-on-screen-keyboard.html"}}]),angular.module("onScreenKeyboard").run(["$templateCache",function(t){"use strict";t.put("/templates/angular-on-screen-keyboard.html","<div class=keyboard><table><tr ng-repeat=\"row in ctrl.rows\"><td ng-repeat=\"key in row\" ng-click=ctrl.printKeyStroke($event) colspan=\"{{key.colspan || 1}}\" ng-class=\"{'button': key.type !== 'margin', 'letter': key.type !== 'margin'}\" class={{key.type}} ng-bind-html=ctrl.getText(key)></td></tr></table></div>")}]);
angular.module("app").directive("blacklist",["$timeout","$q","censorService",function(e,r,t){return{restrict:"A",require:"ngModel",link:function(e,i,n,c){function o(e){for(var r=t.get(),i=0;i<r.length;i++)if(e.toUpperCase().match((".*"+r[i].trim()+".*").replace(" ",".*")))return!1;return!0}c.$asyncValidators.blacklist=function(e,t){if(c.$isEmpty(e))return r.resolve();var i=r.defer();return o(e)?i.resolve():i.reject(),i.promise}}}}]);
angular.module("utils.autofocus",[]).directive("autofocus",["$timeout",function(u){return{restrict:"A",link:function(t,o){u(function(){o[0].focus()})}}}]);
!function(){function n(n,t,r){var c=[];return{set:function(n){c=n},get:function(){return c}}}var t=angular.module("app");t.factory("censorService",["$q","$http","config",n])}();
!function(){function n(n,t){function e(){s={}}function r(){g=""}function o(){return s}function c(){return g}function i(n){s=n}function u(n){g=n}function a(e){return n.get(t.apiUrl,{params:e}).then(function(n){return n.data})}function f(e){n.post(t.apiUrl,s).then(function(n){console.log("saved new visitor",s)}).catch(function(n){console.error("something went wrong",n.message)})}var s={},g="";return{clear:e,clearTerm:r,get:o,getTerm:c,set:i,setTerm:u,save:f,search:a}}var t=angular.module("app");t.factory("visitorService",["$http","config",n])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJmaW5pc2guY29tcG9uZW50LmpzIiwicGxlZGdlLmNvbXBvbmVudC5qcyIsInJlZ2lzdGVyLmNvbXBvbmVudC5qcyIsInJlc3VsdHMuY29tcG9uZW50LmpzIiwic2VhcmNoLmNvbXBvbmVudC5qcyIsInNldHRpbmdzLmNvbXBvbmVudC5qcyIsIndlbGNvbWUuY29tcG9uZW50LmpzIiwiZGlyZWN0aXZlcy9hbmd1bGFyLW9uLXNjcmVlbi1rZXlib2FyZC5qcyIsImRpcmVjdGl2ZXMvYmxhY2tsaXN0LmRpcmVjdGl2ZS5qcyIsImRpcmVjdGl2ZXMvdXRpbC5hdXRvZm9jdXMuanMiLCJzZXJ2aWNlcy9jZW5zb3Iuc2VydmljZS5qcyIsInNlcnZpY2VzL3Zpc2l0b3Iuc2VydmljZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJhbmd1bGFyIiwiY29tcG9uZW50IiwidGVtcGxhdGUiLCIkcm91dGVDb25maWciLCJwYXRoIiwibmFtZSIsInVzZUFzRGVmYXVsdCIsInZhbHVlIiwiaG9zdCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaG9zdG5hbWUiLCJhcGlVcmxCYXNlIiwiYXBpVXJsIiwiaHViVXJsIiwicmVkaXJlY3RUaW1lb3V0IiwiZmluaXNoVGltZW91dCIsImtpb3NrIiwicnVuIiwiY29uZmlnIiwiY29udHJvbGxlciIsInZpc2l0b3IiLCIkdGltZW91dCIsImxvY2FsU3RvcmFnZSIsImh1YiIsIiRjdHJsIiwidGhpcyIsIiRvbkluaXQiLCJjb25zb2xlIiwibG9nIiwiZ2V0IiwiJCIsImNvbm5lY3Rpb24iLCJ1cmwiLCJuYW1lTm90aWZpY2F0aW9uSHViIiwiY291bnREb3duX3RpY2siLCJzdGFydFRpbWVyIiwiJHJvdXRlck9uQWN0aXZhdGUiLCJuZXh0IiwiJHJvdXRlciIsInN0YXJ0IiwiZG9uZSIsInNlcnZlciIsImFkZE5hbWUiLCJuYXZpZ2F0ZSIsImJpbmRpbmdzIiwidGVtcGxhdGVVcmwiLCJ0aW1lciIsInByZXZpb3VzIiwiZ290b1dlbGNvbWUiLCJjYW5jZWwiLCJnb3RvUmVnaXN0ZXIiLCJnZXRUZXJtIiwibGVuZ3RoIiwicGxlZGdlIiwiaWQiLCJzYXZlIiwiJHNjb3BlIiwiJGh0dHAiLCJjZW5zb3IiLCJjcmVhdGVWYWxpZGF0aW9uV2F0Y2hlciIsIiR3YXRjaENvbGxlY3Rpb24iLCJ2YWwiLCJ1bmRlZmluZWQiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsInJlcGxhY2UiLCJ2YWxpZCIsImNoZWNrQXJyYXkiLCJ0b1VwcGVyQ2FzZSIsImZvcm0iLCIkc2V0VmFsaWRpdHkiLCJzdHIiLCJhcnIiLCJpIiwibWF0Y2giLCJ0cmltIiwidGhlbiIsInIiLCJsaXN0IiwiZGF0YSIsImZvckVhY2giLCJpdGVtIiwid29yZCIsInB1c2giLCJzZXQiLCJnb3RvUGxlZGdlIiwidGFibGVTdGF0ZVJlZiIsInBhZ2VTaXplRGVmYXVsdCIsInNlYXJjaE1vZGVsIiwicGFnZSIsInBhZ2VTaXplIiwicGFnaW5nIiwiY3VycmVudFBhZ2UiLCJuYW1lcyIsInNwbGl0Iiwic2VhcmNoIiwiZ290b1NlYXJjaCIsInRvZ2dsZU5hbWUiLCJ2IiwidGFibGVTdGF0ZSIsImxvYWRpbmciLCJ2aXNpdG9ycyIsInJlc3VsdHMiLCJwYWdlZCIsInNlYXJjaFRlcm0iLCJnb3RvU2VhcmNoUmVzdWx0cyIsInNldFRlcm0iLCJhdmFpbGFibGVLaW9za3MiLCJraW9za0NoYW5nZSIsImtleUNvZGUiLCJjbGVhclRlcm0iLCJjbGVhciIsInVubG9jayIsImtleSIsInRvU3RyaW5nIiwiZGlyZWN0aXZlIiwiYSIsImIiLCJyZXN0cmljdCIsImJpbmRUb0NvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJzY29wZSIsInJvd3MiLCJ1cHBlcmNhc2VBbGxXb3JkcyIsInR5cGUiLCJjb2xzcGFuIiwidGV4dCIsImdldFRleHQiLCJjIiwiaW5kZXhPZiIsInRydXN0QXNIdG1sIiwibGluayIsImQiLCJlIiwiZiIsImN0cmwiLCJiaW5kIiwicHJldmVudERlZmF1bHQiLCJpc1VwcGVyQ2FzZSIsImxhc3RJbnB1dEN0cmwiLCJzdGFydFBvcyIsImVuZFBvcyIsInByaW50S2V5U3Ryb2tlIiwiZWxlbWVudCIsInRhcmdldCIsInNyY0VsZW1lbnQiLCJoYXNDbGFzcyIsImVyYXNlS2V5U3Ryb2tlIiwiaW52ZXJzZUNhc2UiLCJzdWJzdHJpbmciLCJnIiwidHJpZ2dlckhhbmRsZXIiLCJzZXRLZXlib2FyZExheW91dCIsInJlZm9jdXMiLCJmb2N1cyIsInNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uRW5kIiwiY2xhc3NOYW1lIiwic2xpY2UiLCJoYXNPd25Qcm9wZXJ0eSIsImZpbmQiLCIkdGVtcGxhdGVDYWNoZSIsInB1dCIsIiRxIiwicmVxdWlyZSIsImVsbSIsImF0dHJzIiwiJGFzeW5jVmFsaWRhdG9ycyIsImJsYWNrbGlzdCIsIm1vZGVsVmFsdWUiLCJ2aWV3VmFsdWUiLCIkaXNFbXB0eSIsInJlc29sdmUiLCJkZWYiLCJkZWZlciIsInJlamVjdCIsInByb21pc2UiLCIkZWxlbWVudCIsImZhY3RvcnkiLCJqc29uIiwidGVybSIsInQiLCJtb2RlbCIsInBhcmFtcyIsInBvc3QiLCJjYXRjaCIsImVyciIsImVycm9yIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6IkNBQ0EsV0FDSSxHQUFJQSxHQUFTQyxRQUFRRCxPQUFPLE9BQ3hCLG9CQUNBLFlBQ0EsZUFDQSxhQUNBLG1CQUNBLGtCQUNBLDJCQUNBLHNCQUdKQSxHQUFPRSxVQUFVLFNBRVRDLFNBQVUscUNBQ1ZDLGVBQ01DLEtBQU0sSUFBS0MsS0FBTSxVQUFXSixVQUFXLFVBQVdLLGNBQWMsSUFDaEVGLEtBQU0sWUFBYUMsS0FBTSxXQUFZSixVQUFXLGFBQ2hERyxLQUFNLFVBQVdDLEtBQU0sU0FBVUosVUFBVyxXQUM1Q0csS0FBTSxVQUFXQyxLQUFNLFNBQVVKLFVBQVcsV0FDNUNHLEtBQU0sVUFBV0MsS0FBTSxTQUFVSixVQUFXLFdBQzVDRyxLQUFNLFdBQVlDLEtBQU0sVUFBV0osVUFBVyxZQUM5Q0csS0FB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U0FBVUMsR0FDOUQsTUFBT0EsR0FBRUUsT0FJakIsUUFBU3hCLEdBQUsyQyxHQUNWekMsRUFBTStILEtBQUt0SyxFQUFPTixPQUFRUSxHQUFTd0QsS0FBSyxTQUFVQyxHQUM5Q2xELFFBQVFDLElBQUksb0JBQXFCUixLQUNsQ3FLLE1BQU0sU0FBVUMsR0FDZi9KLFFBQVFnSyxNQUFNLHVCQUF3QkQsRUFBSUUsV0FoRGxELEdBQUl4SyxNQUNBZ0ssRUFBTyxFQUVYLFFBQ0lyRSxNQUFPQSxFQUNQRCxVQUFXQSxFQUNYakYsSUFBS0EsRUFDTHNCLFFBQVNBLEVBQ1RpQyxJQUFLQSxFQUNMc0IsUUFBU0EsRUFDVG5ELEtBQU1BLEVBQ053QyxPQUFRQSxHQWRoQixHQUFJakcsR0FBU0MsUUFBUUQsT0FBTyxNQXlENUJBLEdBQU9vTCxRQUFRLGtCQUFtQixRQUFTLFNBQVVBIiwiZmlsZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2FwcC5tb2R1bGUuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJywgW1xyXG4gICAgICAgICduZ0NvbXBvbmVudFJvdXRlcicsXHJcbiAgICAgICAgJ25nQW5pbWF0ZScsXHJcbiAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgJ25nTWVzc2FnZXMnLFxyXG4gICAgICAgICdvblNjcmVlbktleWJvYXJkJyxcclxuICAgICAgICAndXRpbHMuYXV0b2ZvY3VzJyxcclxuICAgICAgICAndHJlYXN1cmUtb3ZlcmxheS1zcGlubmVyJyxcclxuICAgICAgICAnTG9jYWxTdG9yYWdlTW9kdWxlJ1xyXG4gICAgXSk7XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgna2lvc2snLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGU6ICc8bmctb3V0bGV0PkxvYWRpbmcgLi48L25nLW91dGxldCA+JyxcclxuICAgICAgICAgICAgJHJvdXRlQ29uZmlnOiBbXHJcbiAgICAgICAgICAgICAgICB7IHBhdGg6ICcvJywgbmFtZTogJ1dlbGNvbWUnLCBjb21wb25lbnQ6ICd3ZWxjb21lJywgdXNlQXNEZWZhdWx0OiB0cnVlIH0sXHJcbiAgICAgICAgICAgICAgICB7IHBhdGg6ICcvcmVnaXN0ZXInLCBuYW1lOiAnUmVnaXN0ZXInLCBjb21wb25lbnQ6ICdyZWdpc3RlcicgfSxcclxuICAgICAgICAgICAgICAgIHsgcGF0aDogJy9wbGVkZ2UnLCBuYW1lOiAnUGxlZGdlJywgY29tcG9uZW50OiAncGxlZGdlJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBwYXRoOiAnL2ZpbmlzaCcsIG5hbWU6ICdGaW5pc2gnLCBjb21wb25lbnQ6ICdmaW5pc2gnIH0sXHJcbiAgICAgICAgICAgICAgICB7IHBhdGg6ICcvc2VhcmNoJywgbmFtZTogJ1NlYXJjaCcsIGNvbXBvbmVudDogJ3NlYXJjaCcgfSxcclxuICAgICAgICAgICAgICAgIHsgcGF0aDogJy9yZXN1bHRzJywgbmFtZTogJ1Jlc3VsdHMnLCBjb21wb25lbnQ6ICdyZXN1bHRzJyB9LFxyXG4gICAgICAgICAgICAgICAgeyBwYXRoOiAnL3NldHRpbmdzJywgbmFtZTogJ1NldHRpbmdzJywgY29tcG9uZW50OiAnc2V0dGluZ3MnIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcblxyXG4gICAgbW9kdWxlLnZhbHVlKCckcm91dGVyUm9vdENvbXBvbmVudCcsICdraW9zaycpO1xyXG4gICAgbW9kdWxlLnZhbHVlKCdjb25maWcnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaG9zdDogd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lLFxyXG4gICAgICAgICAgICBhcGlVcmxCYXNlOiAnaHR0cDovL2xvY2FsaG9zdDo0OTk2MC9hcGkvJyxcclxuICAgICAgICAgICAgYXBpVXJsOiAnaHR0cDovL2xvY2FsaG9zdDo0OTk2MC9hcGkvdmlzaXRvcicsXHJcbiAgICAgICAgICAgIGh1YlVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6NDk5NjAvc2lnbmFscicsXHJcbiAgICAgICAgICAgIHJlZGlyZWN0VGltZW91dDogMzAwMDAsXHJcbiAgICAgICAgICAgIGZpbmlzaFRpbWVvdXQ6IDQsXHJcbiAgICAgICAgICAgIGtpb3NrOiAxXHJcbiAgICAgICAgfSk7XHJcbiAgICBcclxuICAgIG1vZHVsZS5ydW4oWydjb25maWcnLCBmdW5jdGlvbiAoY29uZmlnKSB7XHJcbiAgICAgICAgc3dpdGNoIChjb25maWcuaG9zdCkge1xyXG4gICAgICAgICAgICBjYXNlICdjcm1ja2lvc2snOlxyXG4gICAgICAgICAgICAgICAgY29uZmlnLmFwaVVybEJhc2UgPSAnaHR0cDovL2NybWMvYXBpLycsXHJcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmFwaVVybCA9ICdodHRwOi8vY3JtYy9hcGkvdmlzaXRvcic7XHJcbiAgICAgICAgICAgICAgICBjb25maWcuaHViVXJsID0gJ2h0dHA6Ly9jcm1jL3NpZ25hbHInO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NybWNraW9zay10ZXN0LnNwbGNlbnRlci5vcmcnOlxyXG4gICAgICAgICAgICAgICAgY29uZmlnLmFwaVVybEJhc2UgPSAnaHR0cDovL2NybWMtdGVzdC9hcGkvJyxcclxuICAgICAgICAgICAgICAgICAgICBjb25maWcuYXBpVXJsID0gJ2h0dHA6Ly9jcm1jLXRlc3QvYXBpL3Zpc2l0b3InO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmh1YlVybCA9ICdodHRwOi8vY3JtYy10ZXN0L3NpZ25hbHInO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NybWNraW9zay5zcGxjZW50ZXIub3JnJzpcclxuICAgICAgICAgICAgICAgIGNvbmZpZy5hcGlVcmxCYXNlID0gJ2h0dHA6Ly9jcm1jL2FwaS8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy5hcGlVcmwgPSAnaHR0cDovL2NybWMvYXBpL3Zpc2l0b3InO1xyXG4gICAgICAgICAgICAgICAgY29uZmlnLmh1YlVybCA9ICdodHRwOi8vY3JtYy9zaWduYWxyJztcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgfV0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy9maW5pc2guY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcihjb25maWcsIHZpc2l0b3IsICR0aW1lb3V0LCBsb2NhbFN0b3JhZ2UpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciBodWI7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaW5pc2ggaW5pdCcsIGNvbmZpZyk7XHJcbiAgICAgICAgICAgICRjdHJsLmtpb3NrID0gbG9jYWxTdG9yYWdlLmdldCgna2lvc2snKSB8fCAxO1xyXG5cclxuICAgICAgICAgICAgJC5jb25uZWN0aW9uLmh1Yi51cmwgPSBjb25maWcuaHViVXJsO1xyXG4gICAgICAgICAgICBodWIgPSAkLmNvbm5lY3Rpb24ubmFtZU5vdGlmaWNhdGlvbkh1YjtcclxuICAgICAgICAgICAgJGN0cmwuY291bnREb3duX3RpY2sgPSBjb25maWcuZmluaXNoVGltZW91dDtcclxuICAgICAgICAgICAgJGN0cmwuc3RhcnRUaW1lcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy4kcm91dGVyT25BY3RpdmF0ZSA9IGZ1bmN0aW9uIChuZXh0KSB7XHJcbiAgICAgICAgICAgICRjdHJsLiRyb3V0ZXIgPSB0aGlzLiRyb3V0ZXI7IFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRjdHJsLnN0YXJ0VGltZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5jb3VudERvd25fdGljayA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGltZXIgZmluaXNoZWQnKTtcclxuICAgICAgICAgICAgICAgICQuY29ubmVjdGlvbi5odWIuc3RhcnQoKS5kb25lKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaHViIGNvbm5lY3Rpb24gc3RhcnRlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGh1Yi5zZXJ2ZXIuYWRkTmFtZSgkY3RybC5raW9zaywgdmlzaXRvci5nZXQoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICRjdHJsLiRyb3V0ZXIubmF2aWdhdGUoWydXZWxjb21lJ10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY291bnREb3duX3RpY2stLTtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KCRjdHJsLnN0YXJ0VGltZXIsIDEwMDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnZmluaXNoJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAkcm91dGVyOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvZmluaXNoLmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWydjb25maWcnLCAndmlzaXRvclNlcnZpY2UnLCAnJHRpbWVvdXQnLCAnbG9jYWxTdG9yYWdlU2VydmljZScsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vcGxlZGdlLmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuICAgIC8vVE9ETzogR0VUIGh1YiB1cmwgZnJvbSBzZXR0aW5nc1xyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkdGltZW91dCwgY29uZmlnLCB2aXNpdG9yKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuICAgICAgICB2YXIgdGVybTsgXHJcbiAgICAgICAgdmFyIHRpbWVyOyBcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BsZWRnZSBpbml0Jyk7XHJcbiAgICAgICAgICAgICRjdHJsLnZpc2l0b3IgPSB2aXNpdG9yLmdldCgpO1xyXG4gICAgICAgICAgICAkY3RybC5zdGFydFRpbWVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLiRyb3V0ZXJPbkFjdGl2YXRlID0gZnVuY3Rpb24obmV4dCwgcHJldmlvdXMpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuZ290b1dlbGNvbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5uYXZpZ2F0ZShbJ1dlbGNvbWUnXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5nb3RvUmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcbiAgICAgICAgICAgIGlmICh2aXNpdG9yLmdldFRlcm0oKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIubmF2aWdhdGUoWydSZXN1bHRzJ10pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLm5hdmlnYXRlKFsnUmVnaXN0ZXInXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnBsZWRnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCF2aXNpdG9yLmdldCgpLmlkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSBuZXcgdmlzaXRvcicsIHZpc2l0b3IuZ2V0KCkpO1xyXG4gICAgICAgICAgICAgICAgdmlzaXRvci5zYXZlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmV0dXJuaW5nIHZpc2l0b3InLCB2aXNpdG9yLmdldCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLiRyb3V0ZXIubmF2aWdhdGUoWydGaW5pc2gnXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zdGFydFRpbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLiRyb3V0ZXIubmF2aWdhdGUoWydXZWxjb21lJ10pO1xyXG4gICAgICAgICAgICB9LCBjb25maWcucmVkaXJlY3RUaW1lb3V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3BsZWRnZScsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgJHJvdXRlcjogJzwnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3BsZWRnZS5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJHRpbWVvdXQnLCAnY29uZmlnJywgJ3Zpc2l0b3JTZXJ2aWNlJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy9yZWdpc3Rlci5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcihjb25maWcsIHZpc2l0b3IsICR0aW1lb3V0LCAkc2NvcGUsICRodHRwLCBjZW5zb3IpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0aW1lcjtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwudmlzaXRvciA9IHZpc2l0b3IuZ2V0KCk7XHJcbiAgICAgICAgICAgICRodHRwLmdldChjb25maWcuYXBpVXJsQmFzZSArICdjZW5zb3InKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KGNvbmZpZy5hcGlVcmxCYXNlICsgJ2NlbnNvcicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyLmRhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByLmRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ud29yZCAhPT0gbnVsbCkgbGlzdC5wdXNoKGl0ZW0ud29yZC5yZXBsYWNlKC8gL2csIFwiXCIpLnRvVXBwZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2Vuc29yLnNldChsaXN0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNyZWF0ZVZhbGlkYXRpb25XYXRjaGVyKCk7XHJcbiAgICAgICAgICAgICRjdHJsLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuJHJvdXRlck9uQWN0aXZhdGUgPSBmdW5jdGlvbiAobmV4dCkge1xyXG4gICAgICAgICAgICAkY3RybC4kcm91dGVyID0gdGhpcy4kcm91dGVyO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRjdHJsLmdvdG9XZWxjb21lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLiRyb3V0ZXIubmF2aWdhdGUoWydXZWxjb21lJ10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZ290b1BsZWRnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy4kcm91dGVyLm5hdmlnYXRlKFsnUGxlZGdlJ10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc3RhcnRUaW1lciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcclxuICAgICAgICAgICAgdGltZXIgPSAkdGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC4kcm91dGVyLm5hdmlnYXRlKFsnV2VsY29tZSddKTtcclxuICAgICAgICAgICAgfSwgY29uZmlnLnJlZGlyZWN0VGltZW91dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjcmVhdGVWYWxpZGF0aW9uV2F0Y2hlcigpIHtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS4kd2F0Y2hDb2xsZWN0aW9uKCckY3RybC52aXNpdG9yJyxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodmFsLmZpcnN0bmFtZSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5hbWUgPSB2YWwuZmlyc3RuYW1lICsgdmFsLmxhc3RuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoLyAvZywgXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5hbWUubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsaWQgPSBjaGVja0FycmF5KG5hbWUudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjdHJsLmZvcm0ubGFzdG5hbWUuJHNldFZhbGlkaXR5KCdibGFja2xpc3QnLCB2YWxpZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tBcnJheShzdHIpIHtcclxuICAgICAgICAgICAgdmFyIGFyciA9IGNlbnNvci5nZXQoKTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdHIubWF0Y2goKFwiLipcIiArIGFycltpXS50cmltKCkgKyBcIi4qXCIpLnJlcGxhY2UoXCIgXCIsIFwiLipcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgncmVnaXN0ZXInLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHsgJHJvdXRlcjogJzwnIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3JlZ2lzdGVyLmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWydjb25maWcnLCAndmlzaXRvclNlcnZpY2UnLCAnJHRpbWVvdXQnLCAnJHNjb3BlJywgJyRodHRwJywgJ2NlbnNvclNlcnZpY2UnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbn1cclxuKSgpO1xyXG4iLCIvL3Jlc3VsdHMuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoY29uZmlnLCAkdGltZW91dCwgdmlzaXRvcikge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHRpbWVyOyBcclxuICAgICAgICB2YXIgcGFnZVNpemVEZWZhdWx0ID0gMTA7XHJcbiAgICAgICAgdmFyIHRhYmxlU3RhdGVSZWY7XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0ge1xyXG4gICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVEZWZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwucGFnaW5nID0ge1xyXG4gICAgICAgICAgICBjdXJyZW50UGFnZTogMVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlYXJjaCBpbml0Jyk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gdmlzaXRvci5nZXRUZXJtKCkuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsLmZpcnN0bmFtZSA9IG5hbWVzWzBdOyBcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsLmxhc3RuYW1lID0gbmFtZXNbMV07IFxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwubGFzdG5hbWUgPSBuYW1lc1swXTsgXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRjdHJsLnNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZ290b1dlbGNvbWUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5uYXZpZ2F0ZShbJ1dlbGNvbWUnXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5nb3RvU2VhcmNoID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLiRyb3V0ZXIubmF2aWdhdGUoWydTZWFyY2gnXSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wbGVkZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5uYXZpZ2F0ZShbJ1BsZWRnZSddKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnRvZ2dsZU5hbWUgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAkY3RybC52aXNpdG9yID0gdjtcclxuICAgICAgICAgICAgdmlzaXRvci5zZXQodik7XHJcbiAgICAgICAgICAgICRjdHJsLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaCA9IGZ1bmN0aW9uICh0YWJsZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRhYmxlU3RhdGVSZWYgPSB0YWJsZVN0YXRlO1xyXG4gICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHZpc2l0b3Iuc2VhcmNoKCRjdHJsLnNlYXJjaE1vZGVsKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9ycyA9IHIucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gcjtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkY3RybC5zZWFyY2hNb2RlbC5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc3RhcnRUaW1lcigpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTsgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wYWdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwudmlzaXRvciA9IG51bGw7IFxyXG4gICAgICAgICAgICAkY3RybC5zZWFyY2godGFibGVTdGF0ZVJlZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zdGFydFRpbWVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICB0aW1lciA9ICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLiRyb3V0ZXIubmF2aWdhdGUoWydXZWxjb21lJ10pO1xyXG4gICAgICAgICAgICB9LCBjb25maWcucmVkaXJlY3RUaW1lb3V0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3Jlc3VsdHMnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHsgJHJvdXRlcjogJzwnIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3Jlc3VsdHMuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJ2NvbmZpZycsICckdGltZW91dCcsICd2aXNpdG9yU2VydmljZScsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vc2VhcmNoLmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKGNvbmZpZywgdmlzaXRvciwgJHRpbWVvdXQpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciB0aW1lcjsgXHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWFyY2ggaW5pdCcpO1xyXG4gICAgICAgICAgICAkY3RybC5zZWFyY2hUZXJtID0gdmlzaXRvci5nZXRUZXJtKCk7XHJcbiAgICAgICAgICAgICRjdHJsLnN0YXJ0VGltZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmdvdG9XZWxjb21lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkdGltZW91dC5jYW5jZWwodGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLiRyb3V0ZXIubmF2aWdhdGUoWydXZWxjb21lJ10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZ290b1NlYXJjaFJlc3VsdHMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmlzaXRvci5zZXRUZXJtKCRjdHJsLnNlYXJjaFRlcm0pOyBcclxuICAgICAgICAgICAgJHRpbWVvdXQuY2FuY2VsKHRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy4kcm91dGVyLm5hdmlnYXRlKFsnUmVzdWx0cyddKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnN0YXJ0VGltZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICR0aW1lb3V0LmNhbmNlbCh0aW1lcik7XHJcbiAgICAgICAgICAgIHRpbWVyID0gJHRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuJHJvdXRlci5uYXZpZ2F0ZShbJ1dlbGNvbWUnXSk7XHJcbiAgICAgICAgICAgIH0sIGNvbmZpZy5yZWRpcmVjdFRpbWVvdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnc2VhcmNoJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7ICRyb3V0ZXI6ICc8JyB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9zZWFyY2guY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJ2NvbmZpZycsICd2aXNpdG9yU2VydmljZScsICckdGltZW91dCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vc2V0dGluZ3MuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbigpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIobG9jYWxTdG9yYWdlKSB7XHJcbiAgICAgICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAkY3RybC5hdmFpbGFibGVLaW9za3MgPSBbMSwgMiwgMywgNF07XHJcbiAgICAgICAgICAgICRjdHJsLmtpb3NrID0gMTsgXHJcblxyXG4gICAgICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NldHRpbmdzIGluaXQnKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLmtpb3NrID0gbG9jYWxTdG9yYWdlLmdldCgna2lvc2snKSB8fCAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLiRyb3V0ZXJPbkFjdGl2YXRlID0gZnVuY3Rpb24gKG5leHQpIHsgfTtcclxuXHJcbiAgICAgICAgICAgICRjdHJsLmdvdG9XZWxjb21lID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLm5hdmlnYXRlKFsnV2VsY29tZSddKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGN0cmwua2lvc2tDaGFuZ2UgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoJ2tpb3NrJywgJGN0cmwua2lvc2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBtb2R1bGUuY29tcG9uZW50KCdzZXR0aW5ncycsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7ICRyb3V0ZXI6ICc8JyB9LFxyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvc2V0dGluZ3MuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcjogWydsb2NhbFN0b3JhZ2VTZXJ2aWNlJywgY29udHJvbGxlcl1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4pKCk7IiwiLy93ZWxjb21lLmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKHZpc2l0b3IpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciBrZXlDb2RlID0gJyc7IFxyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnd2VsY29tZSBpbml0Jyk7XHJcbiAgICAgICAgICAgIHZpc2l0b3IuY2xlYXJUZXJtKCk7XHJcbiAgICAgICAgICAgIHZpc2l0b3IuY2xlYXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuJHJvdXRlck9uQWN0aXZhdGUgPSBmdW5jdGlvbiAobmV4dCkgeyB9O1xyXG5cclxuICAgICAgICAkY3RybC5nb3RvUmVnaXN0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5uYXZpZ2F0ZShbJ1JlZ2lzdGVyJ10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZ290b1NlYXJjaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy4kcm91dGVyLm5hdmlnYXRlKFsnU2VhcmNoJ10pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwudW5sb2NrID0gZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICBpZiAoa2V5Q29kZS5sZW5ndGggPiA0KSB7XHJcbiAgICAgICAgICAgICAgICBrZXlDb2RlID0ga2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAga2V5Q29kZSArPSBrZXkudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gJzEyMTInKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIubmF2aWdhdGUoWydTZXR0aW5ncyddKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd3ZWxjb21lJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7ICRyb3V0ZXI6ICc8JyB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC93ZWxjb21lLmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyd2aXNpdG9yU2VydmljZScsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCJhbmd1bGFyLm1vZHVsZShcIm9uU2NyZWVuS2V5Ym9hcmRcIiwgW1wibmdTYW5pdGl6ZVwiXSkuZGlyZWN0aXZlKFwib25TY3JlZW5LZXlib2FyZFwiLCBbXCIkdGltZW91dFwiLCBcIiRkb2N1bWVudFwiLCBmdW5jdGlvbiAoYSwgYikge1xyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHJlc3RyaWN0OiBcIkVcIixcclxuICAgICAgICBiaW5kVG9Db250cm9sbGVyOiAhMCxcclxuICAgICAgICBjb250cm9sbGVyQXM6IFwiY3RybFwiLFxyXG4gICAgICAgIHNjb3BlOiB7XHJcbiAgICAgICAgICAgIHJvd3M6IFwiPT9cIixcclxuICAgICAgICAgICAgdXBwZXJjYXNlQWxsV29yZHM6IFwiQFwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb250cm9sbGVyOiBbXCIkc2NlXCIsIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHZhciBiID0gdGhpcztcclxuICAgICAgICAgICAgYi5yb3dzIHx8IChiLnJvd3MgPSBbXHJcbiAgICAgICAgICAgICAgICBbXCIxXCIsIFwiMlwiLCBcIjNcIiwgXCI0XCIsIFwiNVwiLCBcIjZcIiwgXCI3XCIsIFwiOFwiLCBcIjlcIiwgXCIwXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcImVyYXNlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29sc3BhbjogMixcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIiZsQXJyO1wiXHJcbiAgICAgICAgICAgICAgICB9XSxcclxuICAgICAgICAgICAgICAgIFtcInFcIiwgXCJ3XCIsIFwiZVwiLCBcInJcIiwgXCJ0XCIsIFwieVwiLCBcInVcIiwgXCJpXCIsIFwib1wiLCBcInBcIiwgXCJAXCJdLFxyXG4gICAgICAgICAgICAgICAgW1wiYVwiLCBcInNcIiwgXCJkXCIsIFwiZlwiLCBcImdcIiwgXCJoXCIsIFwialwiLCBcImtcIiwgXCJsXCIsIFwiLVwiLCBcIl9cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwibWFyZ2luXCJcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgW3tcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNoaWZ0XCJcclxuICAgICAgICAgICAgICAgIH0sIFwielwiLCBcInhcIiwgXCJjXCIsIFwidlwiLCBcImJcIiwgXCJuXCIsIFwibVwiLCBcIixcIiwgXCIuXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInNoaWZ0XCJcclxuICAgICAgICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgICAgICAgW3tcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIm1hcmdpblwiXHJcbiAgICAgICAgICAgICAgICB9LCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJzcGFjZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbHNwYW46IDksXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCIgXCJcclxuICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgIF0pLFxyXG4gICAgICAgICAgICAgICAgYi5nZXRUZXh0ID0gZnVuY3Rpb24gKGIpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJtYXJnaW5cIiA9PT0gYi50eXBlKSByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXCJzaGlmdFwiID09PSBiLnR5cGUpIHJldHVybiBcIiZkQXJyO1wiO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjID0gYi50ZXh0IHx8IGI7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGMgJiYgYy5pbmRleE9mKFwiJlwiKSA+IC0xID8gYS50cnVzdEFzSHRtbChjKSA6IGM7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIH1dLFxyXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChjLCBkLCBlKSB7XHJcbiAgICAgICAgICAgIHZhciBmID0gYy5jdHJsO1xyXG4gICAgICAgICAgICBkLmJpbmQoXCJjb250ZXh0bWVudVwiLCBmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGEucHJldmVudERlZmF1bHQoKSwgITE7XHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgZi5pc1VwcGVyQ2FzZSA9ICExLCBmLmxhc3RJbnB1dEN0cmwgPSBudWxsLCBmLnN0YXJ0UG9zID0gbnVsbCwgZi5lbmRQb3MgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgZi5wcmludEtleVN0cm9rZSA9IGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGYubGFzdElucHV0Q3RybCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYiA9IGFuZ3VsYXIuZWxlbWVudChhLnRhcmdldCB8fCBhLnNyY0VsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYi5oYXNDbGFzcyhcImVyYXNlXCIpKSByZXR1cm4gdm9pZCBmLmVyYXNlS2V5U3Ryb2tlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiLmhhc0NsYXNzKFwic2hpZnRcIikpIHJldHVybiB2b2lkIGYuaW52ZXJzZUNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGMgPSBhbmd1bGFyLmVsZW1lbnQoZi5sYXN0SW5wdXRDdHJsKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBjLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZSA9IGQuc3Vic3RyaW5nKDAsIGYuc3RhcnRQb3MpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZyA9IGQuc3Vic3RyaW5nKGYuZW5kUG9zLCBkLmxlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGMudmFsKGUgKyBiLnRleHQoKSArIGcpLCBjLnRyaWdnZXJIYW5kbGVyKFwiY2hhbmdlXCIpLCBmLnN0YXJ0UG9zKysgLCBmLmVuZFBvcysrICwgZi5zZXRLZXlib2FyZExheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmLmludmVyc2VDYXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vdmFyIGEgPSBkWzBdLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubGV0dGVyXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vYW5ndWxhci5mb3JFYWNoKGEsIGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgdmFyIGIgPSBhbmd1bGFyLmVsZW1lbnQoYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgZi5pc1VwcGVyQ2FzZSA/IGIudGV4dChiLnRleHQoKS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkpIDogYi50ZXh0KGIudGV4dCgpLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy99KSwgYW5ndWxhci5mb3JFYWNoKGRbMF0ucXVlcnlTZWxlY3RvckFsbChcIi5zaGlmdFwiKSwgZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyAgICBmLmlzVXBwZXJDYXNlID8gYW5ndWxhci5lbGVtZW50KGEpLmh0bWwoXCImZEFycjtcIikgOiBhbmd1bGFyLmVsZW1lbnQoYSkuaHRtbChcIiZ1QXJyO1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAvL30pLCBmLmlzVXBwZXJDYXNlID0gIWYuaXNVcHBlckNhc2U7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZi5yZWZvY3VzID0gZnVuY3Rpb24gKCkgeyBmLmxhc3RJbnB1dEN0cmwuZm9jdXMoKSB9LFxyXG4gICAgICAgICAgICAgICAgZi5lcmFzZUtleVN0cm9rZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZi5sYXN0SW5wdXRDdHJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhID0gZi5zdGFydFBvcyAhPT0gZi5lbmRQb3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID0gYW5ndWxhci5lbGVtZW50KGYubGFzdElucHV0Q3RybCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gYi52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQgPSBjLnN1YnN0cmluZygwLCBhID8gZi5zdGFydFBvcyA6IGYuc3RhcnRQb3MgLSAxKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBjLnN1YnN0cmluZyhmLmVuZFBvcywgYy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiLnZhbChkICsgZSksIGIudHJpZ2dlckhhbmRsZXIoXCJjaGFuZ2VcIiksIGEgPyBmLmVuZFBvcyA9IGYuc3RhcnRQb3MgOiAoZi5zdGFydFBvcy0tICwgZi5lbmRQb3MtLSksIGYubGFzdElucHV0Q3RybC5zZWxlY3Rpb25TdGFydCA9IGYuc3RhcnRQb3MsIGYubGFzdElucHV0Q3RybC5zZWxlY3Rpb25FbmQgPSBmLnN0YXJ0UG9zLCBmLnNldEtleWJvYXJkTGF5b3V0KCksIGYucmVmb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIGYuc2V0S2V5Ym9hcmRMYXlvdXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGYubGFzdElucHV0Q3RybCA/IHZvaWQgKGYubGFzdElucHV0Q3RybC5jbGFzc05hbWUgJiYgZi5pc1VwcGVyQ2FzZSA/IGYuaW52ZXJzZUNhc2UoKSA6IDAgPT09IGFuZ3VsYXIuZWxlbWVudChmLmxhc3RJbnB1dEN0cmwpLnZhbCgpLmxlbmd0aCA/IGYuaXNVcHBlckNhc2UgfHwgKGYuaXNVcHBlckNhc2UgPSAhMSwgZi5pbnZlcnNlQ2FzZSgpKSA6IFwiIFwiID09PSBhbmd1bGFyLmVsZW1lbnQoZi5sYXN0SW5wdXRDdHJsKS52YWwoKS5zbGljZSgtMSkgJiYgIWYuaXNVcHBlckNhc2UgJiYgZS5oYXNPd25Qcm9wZXJ0eShcInVwcGVyY2FzZUFsbFdvcmRzXCIpID8gZi5pbnZlcnNlQ2FzZSgpIDogKGYuaXNVcHBlckNhc2UgPSAhMCwgZi5pbnZlcnNlQ2FzZSgpKSkgOiAoZi5pc1VwcGVyQ2FzZSA9ICExLCB2b2lkIGYuaW52ZXJzZUNhc2UoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYi5maW5kKFwiaW5wdXRcIikuYmluZChcImJsdXIgZm9jdXNcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYuc2V0S2V5Ym9hcmRMYXlvdXQoKSwgZi5sYXN0SW5wdXRDdHJsID0gdGhpcywgZi5sYXN0SW5wdXRDdHJsICYmIFwiY2hlY2tib3hcIiAhPT0gZi5sYXN0SW5wdXRDdHJsLnR5cGUgJiYgKGYuc3RhcnRQb3MgPSBmLmxhc3RJbnB1dEN0cmwuc2VsZWN0aW9uU3RhcnQsIGYuZW5kUG9zID0gZi5sYXN0SW5wdXRDdHJsLnNlbGVjdGlvbkVuZCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5iaW5kKFwia2V5ZG93blwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuc3RhcnRQb3MgPSBmLmxhc3RJbnB1dEN0cmwuc2VsZWN0aW9uU3RhcnQsIGYuZW5kUG9zID0gZi5sYXN0SW5wdXRDdHJsLnNlbGVjdGlvbkVuZDtcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIGEoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYuaW52ZXJzZUNhc2UoKTtcclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiL3RlbXBsYXRlcy9hbmd1bGFyLW9uLXNjcmVlbi1rZXlib2FyZC5odG1sXCJcclxuICAgIH07XHJcbn1dKTs7XHJcbmFuZ3VsYXIubW9kdWxlKCdvblNjcmVlbktleWJvYXJkJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbiAoJHRlbXBsYXRlQ2FjaGUpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAkdGVtcGxhdGVDYWNoZS5wdXQoJy90ZW1wbGF0ZXMvYW5ndWxhci1vbi1zY3JlZW4ta2V5Ym9hcmQuaHRtbCcsXHJcbiAgICAgICAgXCI8ZGl2IGNsYXNzPWtleWJvYXJkPjx0YWJsZT48dHIgbmctcmVwZWF0PVxcXCJyb3cgaW4gY3RybC5yb3dzXFxcIj48dGQgbmctcmVwZWF0PVxcXCJrZXkgaW4gcm93XFxcIiBuZy1jbGljaz1jdHJsLnByaW50S2V5U3Ryb2tlKCRldmVudCkgY29sc3Bhbj1cXFwie3trZXkuY29sc3BhbiB8fCAxfX1cXFwiIG5nLWNsYXNzPVxcXCJ7J2J1dHRvbic6IGtleS50eXBlICE9PSAnbWFyZ2luJywgJ2xldHRlcic6IGtleS50eXBlICE9PSAnbWFyZ2luJ31cXFwiIGNsYXNzPXt7a2V5LnR5cGV9fSBuZy1iaW5kLWh0bWw9Y3RybC5nZXRUZXh0KGtleSk+PC90ZD48L3RyPjwvdGFibGU+PC9kaXY+XCJcclxuICAgICk7XHJcblxyXG59XSk7IiwiLy9ibGFja2xpc3QuZGlyZWN0aXZlLmpzXHJcblxyXG5hbmd1bGFyXHJcbiAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgLmRpcmVjdGl2ZSgnYmxhY2tsaXN0JywgWyckdGltZW91dCcsICckcScsICdjZW5zb3JTZXJ2aWNlJywgZnVuY3Rpb24gKCR0aW1lb3V0LCAkcSwgY2Vuc29yKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsbSwgYXR0cnMsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VybmFtZXMgPSBbJ0ppbScsICdKb2huJywgJ0ppbGwnLCAnSmFja2llJ107XHJcblxyXG4gICAgICAgICAgICAgICAgY3RybC4kYXN5bmNWYWxpZGF0b3JzLmJsYWNrbGlzdCA9IGZ1bmN0aW9uIChtb2RlbFZhbHVlLCB2aWV3VmFsdWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN0cmwuJGlzRW1wdHkobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc2lkZXIgZW1wdHkgbW9kZWwgdmFsaWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlc29sdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkZWYgPSAkcS5kZWZlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrQXJyYXkobW9kZWxWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmLnJlamVjdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZi5yZXNvbHZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVmLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNoZWNrQXJyYXkoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IGNlbnNvci5nZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyLnRvVXBwZXJDYXNlKCkubWF0Y2goKFwiLipcIiArIGFycltpXS50cmltKCkgKyBcIi4qXCIpLnJlcGxhY2UoXCIgXCIsIFwiLipcIikpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG5cclxuIiwiLy91dGlsLmF1dG9mb2N1cy5qc1xyXG4vKipcclxuICogdGhlIEhUTUw1IGF1dG9mb2N1cyBwcm9wZXJ0eSBjYW4gYmUgZmluaWNreSB3aGVuIGl0IGNvbWVzIHRvIGR5bmFtaWNhbGx5IGxvYWRlZFxyXG4gKiB0ZW1wbGF0ZXMgYW5kIHN1Y2ggd2l0aCBBbmd1bGFySlMuIFVzZSB0aGlzIHNpbXBsZSBkaXJlY3RpdmUgdG9cclxuICogdGFtZSB0aGlzIGJlYXN0IG9uY2UgYW5kIGZvciBhbGwuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiA8aW5wdXQgdHlwZT1cInRleHRcIiBhdXRvZm9jdXM+XHJcbiAqIFxyXG4gKiBMaWNlbnNlOiBNSVRcclxuICovXHJcblxyXG5cclxuYW5ndWxhclxyXG4gICAgLm1vZHVsZSgndXRpbHMuYXV0b2ZvY3VzJywgW10pXHJcbiAgICAuZGlyZWN0aXZlKCdhdXRvZm9jdXMnLCBbJyR0aW1lb3V0JywgZnVuY3Rpb24gKCR0aW1lb3V0KSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKCRzY29wZSwgJGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudFswXS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XSk7XHJcblxyXG4iLCIvL2NlbnNvci5zZXJ2aWNlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoJHEsICRodHRwLCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgdmFyIGpzb24gPSBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XHJcbiAgICAgICAgICAgICAgICBqc29uID0gdmFsO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBqc29uO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy9yZXR1cm4ge1xyXG4gICAgICAgIC8vICAgIGlzQmxhY2tMaXN0ZWQ6IGlzQmxhY2tMaXN0ZWQsXHJcbiAgICAgICAgLy8gICAgZ2V0OiBnZXQsIFxyXG4gICAgICAgIC8vICAgIGFsbDogYWxsXHJcbiAgICAgICAgLy99O1xyXG5cclxuICAgICAgICAvL2Z1bmN0aW9uIGlzQmxhY2tMaXN0ZWQodXNlcm5hbWUpIHtcclxuICAgICAgICAvLyAgICBpZiAoISF1c2VybmFtZSkge1xyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gJHEud2hlbigodXNlcm5hbWUgPT09ICdmcmVkJykpO1xyXG4gICAgICAgIC8vICAgIH1cclxuICAgICAgICAvLyAgICByZXR1cm4gJHEucmVqZWN0KFwiSW52YWxpZCB1c2VybmFtZVwiKTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9mdW5jdGlvbiBnZXQoKSB7XHJcbiAgICAgICAgLy8gICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgLy8gICAgICAgIGxvYWQoKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAvLyAgICAgICAgICAgIGxpc3QgPSByOyBcclxuICAgICAgICAvLyAgICAgICAgfSk7IFxyXG4gICAgICAgIC8vICAgIH1cclxuXHJcbiAgICAgICAgLy8gICAgcmV0dXJuIGxpc3Q7XHJcblxyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICAvL2Z1bmN0aW9uIF9hbGwoKSB7XHJcbiAgICAgICAgLy8gICAgY29uc29sZS5sb2coJ2xpc3QnLCBsaXN0KTtcclxuICAgICAgICAvLyAgICBpZiAobGlzdC5sZW5ndGggPiAwKSByZXR1cm4gbGlzdDtcclxuICAgICAgICAvLyAgICByZXR1cm4gJGh0dHAuZ2V0KGNvbmZpZy5hcGlVcmxCYXNlICsgJ2NlbnNvcicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAvLyAgICAgICAgY29uc29sZS5sb2coJ2dldHRpbmcgZGF0YSBmcm9tIHVyaScpO1xyXG4gICAgICAgIC8vICAgICAgICBsaXN0ID0gci5kYXRhO1xyXG4gICAgICAgIC8vICAgICAgICByZXR1cm4gbGlzdDtcclxuICAgICAgICAvLyAgICB9KTtcclxuICAgICAgICAvL31cclxuXHJcbiAgICAgICAgLy9yZXN1bHRzLmFsbCA9IF9hbGw7XHJcbiAgICAgICAgLy9yZXR1cm4gcmVzdWx0cztcclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmZhY3RvcnkoJ2NlbnNvclNlcnZpY2UnLCBbJyRxJywgJyRodHRwJywgJ2NvbmZpZycsIGZhY3RvcnldKTtcclxufVxyXG4pKCk7IiwiLy92aXNpdG9yLnNlcnZpY2UuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGZhY3RvcnkoJGh0dHAsIGNvbmZpZykge1xyXG4gICAgICAgIHZhciB2aXNpdG9yID0ge307XHJcbiAgICAgICAgdmFyIHRlcm0gPSAnJztcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBjbGVhcjogY2xlYXIsXHJcbiAgICAgICAgICAgIGNsZWFyVGVybTogY2xlYXJUZXJtLCBcclxuICAgICAgICAgICAgZ2V0OiBnZXQsXHJcbiAgICAgICAgICAgIGdldFRlcm06IGdldFRlcm0sXHJcbiAgICAgICAgICAgIHNldDogc2V0LFxyXG4gICAgICAgICAgICBzZXRUZXJtOiBzZXRUZXJtLFxyXG4gICAgICAgICAgICBzYXZlOiBzYXZlLCBcclxuICAgICAgICAgICAgc2VhcmNoOiBzZWFyY2hcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhcigpIHtcclxuICAgICAgICAgICAgdmlzaXRvciA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYXJUZXJtKCkge1xyXG4gICAgICAgICAgICB0ZXJtID0gJyc7IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdmlzaXRvcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFRlcm0oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0ZXJtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0KHYpIHtcclxuICAgICAgICAgICAgdmlzaXRvciA9IHY7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRUZXJtKHQpIHtcclxuICAgICAgICAgICAgdGVybSA9IHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZWFyY2gobW9kZWwpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChjb25maWcuYXBpVXJsLCB7IHBhcmFtczogbW9kZWwgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHIuZGF0YTsgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2F2ZSh2KSB7XHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoY29uZmlnLmFwaVVybCwgdmlzaXRvcikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NhdmVkIG5ldyB2aXNpdG9yJywgdmlzaXRvcik7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5mYWN0b3J5KCd2aXNpdG9yU2VydmljZScsIFsnJGh0dHAnLCAnY29uZmlnJywgZmFjdG9yeV0pO1xyXG5cclxufVxyXG4pKCk7Il19
