!function(){var t=angular.module("app",["app.directives","ui.bootstrap","ui.slider","smart-table","ngTagsInput","toastr"]);t.config(["toastrConfig",function(t){angular.extend(t,{positionClass:"toast-bottom-right",newestOnTop:!0,allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!1,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}])}();
!function(){function n(n){var e=this;e.$onInit=function(){console.log("censor edit init"),e.resolve&&(e.id=e.resolve.id),e.id&&n.get("api/censor/"+e.id).then(function(n){e.censor=n.data}).catch(function(n){console.log("err",n.message)})},e.cancel=function(){e.dismiss()},e.save=function(){return console.log("save censor",e.censor),n.post("api/censor",e.censor).then(function(n){angular.extend(e.censor,n.data),e.modalInstance.close(e.censor)}).catch(function(n){console.error("something went wrong",n.message)})}}var e=angular.module("app");e.component("censorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/censors/censor-edit.component.html",controller:["$http",n]})}();
!function(){function e(e,n,o){var s,t=this,c=10;t.searchModel={page:1,pageSize:c},t.$onInit=function(){console.log("censor list init")},t.create=function(){n.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(e){t.censors.unshift(e),o.success("Saved Censor")},function(e){})},t.edit=function(e){n.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"md"}).result.then(function(n){angular.extend(e,n),o.success("Updated Censor")},function(e){})},t.delete=function(n){e.delete("api/censor/"+n.id).then(function(e){var s=t.censors.indexOf(n);t.censors.splice(s,1),o.warning("Deleted censor")})},t.search=function(n){s=n,"undefined"!=typeof n.sort.predicate&&(t.searchModel.orderBy=n.sort.predicate,t.searchModel.orderDirection=n.sort.reverse?"desc":"asc"),e.get("api/censor",{params:t.searchModel}).then(function(e){t.censors=e.data.results,t.searchModel=e.data,delete t.searchModel.results})},t.paged=function(){t.search(s)}}var n=angular.module("app");n.component("censorList",{templateUrl:"app/censors/censor-list.component.html",controller:["$http","$uibModal","toastr",e]})}();
!function(){function n(n,o){var t=this,i=$.connection.nameNotificationHub;t.$onInit=function(){console.log("configuration setting init"),$.connection.hub.start().done(function(){console.log("hub connection started")}),n.get("api/configuration").then(function(n){t.configuration=n.data,o.success("Loaded configuration")})},t.cancel=function(){t.dismiss()},t.save=function(){return n.post("api/configuration",t.configuration).then(function(n){angular.extend(t.configuration,n.data),o.success("Configuration Saved")}).catch(function(n){console.error("something went wrong",n.message),o.error("Error Saving Configuration")}).finally(function(){i.server.configurationChange(t.configuration).then(function(n){console.log("configuration sent to hub")})})}}var o=angular.module("app");o.component("configurationSetting",{templateUrl:"app/configuration/configuration-setting.component.html",controller:["$http","toastr",n]})}();
!function(){function o(o){var n=this;n.$onInit=function(){console.log("dashboard init"),o.get("api/visitor/summary").then(function(o){n.summary=o.data}).catch(function(o){console.error("something went wrong",o)})}}var n=angular.module("app");n.component("dashboard",{templateUrl:"app/dashboard/dashboard.component.html",controller:["$http",o]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){angular.module("app").filter("percentage",["$filter",function(n){return function(e,r){return n("number")(100*e,r)+"%"}}])}();
!function(){function e(e){var s=this;s.$onInit=function(){console.log("user edit init"),s.resolve&&(s.user=s.resolve.user),e.get("api/user/roles").then(function(e){s.roles=e.data})},s.cancel=function(){s.dismiss()},s.save=function(){s.user.email||(s.user.email=s.user.userName+"@splcenter.org");var n=[];return _.forEach(s.user.roles,function(e){n.push(e.name)}),0===n.length&&n.push("user"),s.user.roles=n,e.post("api/user/update",s.user).then(function(e){angular.extend(s.user,e.data),s.modalInstance.close(s.user)}).catch(function(e){console.error("something went wrong",e.message)})}}var s=angular.module("app");s.component("userEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/users/user-edit.component.html",controller:["$http",e]})}();
!function(){function e(e,n,s){var t=this;t.$onInit=function(){t.title="Users",e.get("api/user").then(function(e){t.users=e.data})},t.create=function(){n.open({component:"userEdit",bindings:{modalInstance:"<"},size:"md"}).result.then(function(e){var n=e,o=[];_.forEach(e.roles,function(e){console.log("role",e),o.push(e)}),n.roles=[],console.log("result",n),n.roles=[]=o,console.log("roles",o),console.log("result",n),t.users.unshift(n),s.success("Created User")},function(e){})},t.edit=function(e){n.open({component:"userEdit",bindings:{modalInstance:"<"},resolve:{user:angular.copy(e)},size:"md"}).result.then(function(n){angular.extend(e,n),s.success("Updated User")},function(e){})},t.delete=function(n){e.delete("api/user/"+n.id).then(function(e){var o=t.users.indexOf(n);t.users.splice(o,1),s.warning("Deleted User")})}}var n=angular.module("app");n.component("userList",{templateUrl:"app/users/user-list.component.html",controller:["$http","$uibModal","toastr",e]})}();
!function(){function i(i){var t=this;t.$onInit=function(){console.log("visitor edit init"),t.title="New Visitor",t.resolve&&(t.id=t.resolve.id),t.id&&i.get("api/visitor/"+t.id).then(function(i){t.visitor=i.data,t.title=t.visitor.firstname+" "+t.visitor.lastname}).catch(function(i){console.log("err",i.message)})},t.cancel=function(){t.dismiss()},t.save=function(){return console.log("save visitor",t.visitor),i.post("api/visitor",t.visitor).then(function(i){angular.extend(t.visitor,i.data),t.modalInstance.close(t.visitor)}).catch(function(i){console.error("something went wrong",i.message)})}}var t=angular.module("app");t.component("visitorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/visitors/visitor-edit.component.html",controller:["$http",i]})}();
!function(){function e(e,t,i){var s,o=this,n=10;o.searchModel={page:1,pageSize:n},o.$onInit=function(){console.log("init visitor list"),o.title="Visitors"},o.create=function(){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(e){o.visitors.unshift(e),i.success("Created Visitor")},function(e){})},o.edit=function(e){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"md"}).result.then(function(t){angular.extend(e,t),i.success("Updated Visitor")},function(e){})},o.delete=function(t){e.delete("api/visitor/"+t.id).then(function(e){var s=o.visitors.indexOf(t);o.visitors.splice(s,1),i.warning("Deleted Visitor")})},o.search=function(t){s=t,o.searchModel.fuzzyMatchRange=o.fuzzyMatchRange,o.searchModel.daysOld=o.days,"undefined"!=typeof t.sort.predicate&&(o.searchModel.orderBy=t.sort.predicate,o.searchModel.orderDirection=t.sort.reverse?"desc":"asc"),e.get("api/visitor",{params:o.searchModel}).then(function(e){o.visitors=e.data.results,o.searchModel=e.data,delete o.searchModel.results})},o.paged=function(){o.search(s)}}var t=angular.module("app");t.component("visitorList",{templateUrl:"app/visitors/visitor-list.component.html",controller:["$http","$uibModal","toastr",e]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjZW5zb3JzL2NlbnNvci1lZGl0LmNvbXBvbmVudC5qcyIsImNlbnNvcnMvY2Vuc29yLWxpc3QuY29tcG9uZW50LmpzIiwiY29uZmlndXJhdGlvbi9jb25maWd1cmF0aW9uLXNldHRpbmcuY29tcG9uZW50LmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb21wb25lbnQuanMiLCJkaXJlY3RpdmVzL2RpcmVjdGl2ZXMubW9kdWxlcy5qcyIsImRpcmVjdGl2ZXMvc3RUYWJsZS5kaXJlY3RpdmUuanMiLCJmaWx0ZXJzL2ZpbHRlcnMuanMiLCJ1c2Vycy91c2VyLWVkaXQuY29tcG9uZW50LmpzIiwidXNlcnMvdXNlci1saXN0LmNvbXBvbmVudC5qcyIsInZpc2l0b3JzL3Zpc2l0b3ItZWRpdC5jb21wb25lbnQuanMiLCJ2aXNpdG9ycy92aXNpdG9yLWxpc3QuY29tcG9uZW50LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJjb25maWciLCJ0b2FzdHJDb25maWciLCJleHRlbmQiLCJwb3NpdGlvbkNsYXNzIiwibmV3ZXN0T25Ub3AiLCJhbGxvd0h0bWwiLCJjbG9zZUJ1dHRvbiIsImNsb3NlSHRtbCIsImV4dGVuZGVkVGltZU91dCIsImljb25DbGFzc2VzIiwiZXJyb3IiLCJpbmZvIiwic3VjY2VzcyIsIndhcm5pbmciLCJtZXNzYWdlQ2xhc3MiLCJvbkhpZGRlbiIsIm9uU2hvd24iLCJvblRhcCIsInByb2dyZXNzQmFyIiwidGFwVG9EaXNtaXNzIiwidGVtcGxhdGVzIiwidG9hc3QiLCJwcm9ncmVzc2JhciIsInRpbWVPdXQiLCJ0aXRsZUNsYXNzIiwidG9hc3RDbGFzcyIsImNvbnRyb2xsZXIiLCIkaHR0cCIsIiRjdHJsIiwidGhpcyIsIiRvbkluaXQiLCJjb25zb2xlIiwibG9nIiwicmVzb2x2ZSIsImlkIiwiZ2V0IiwidGhlbiIsInIiLCJjZW5zb3IiLCJkYXRhIiwiY2F0Y2giLCJlcnIiLCJtZXNzYWdlIiwiY2FuY2VsIiwiZGlzbWlzcyIsInNhdmUiLCJwb3N0IiwibW9kYWxJbnN0YW5jZSIsImNsb3NlIiwiY29tcG9uZW50IiwiYmluZGluZ3MiLCJpdGVtIiwidGVtcGxhdGVVcmwiLCIkbW9kYWwiLCJ0b2FzdHIiLCJ0YWJsZVN0YXRlUmVmIiwicGFnZVNpemVEZWZhdWx0Iiwic2VhcmNoTW9kZWwiLCJwYWdlIiwicGFnZVNpemUiLCJjcmVhdGUiLCJvcGVuIiwic2l6ZSIsInJlc3VsdCIsImNlbnNvcnMiLCJ1bnNoaWZ0IiwicmVhc29uIiwiZWRpdCIsImMiLCJkZWxldGUiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwic2VhcmNoIiwidGFibGVTdGF0ZSIsInNvcnQiLCJvcmRlckJ5IiwicHJlZGljYXRlIiwib3JkZXJEaXJlY3Rpb24iLCJyZXZlcnNlIiwicGFyYW1zIiwicmVzdWx0cyIsInBhZ2VkIiwiaHViIiwiJCIsImNvbm5lY3Rpb24iLCJuYW1lTm90aWZpY2F0aW9uSHViIiwic3RhcnQiLCJkb25lIiwiY29uZmlndXJhdGlvbiIsImZpbmFsbHkiLCJzZXJ2ZXIiLCJjb25maWd1cmF0aW9uQ2hhbmdlIiwic3VtbWFyeSIsImRpcmVjdGl2ZSIsInN0Q29uZmlnIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHIiLCJjdHJsIiwiYmluZCIsInRhYmxlQ3RybCIsInBpcGUiLCJyZXN0cmljdCIsImVsIiwiYXR0cnMiLCJvbiIsImV2ZW50Iiwid2hpY2giLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiRhcHBseSIsImN0cmxzIiwibW9kZWwiLCJmb3JFYWNoIiwiJHZpZXdWYWx1ZSIsInZhbHVlIiwia2V5IiwidG9Mb3dlckNhc2UiLCJBcnJheSIsImlzQXJyYXkiLCJfIiwiaW5jbHVkZXMiLCJwcmVkaWNhdGVPYmplY3QiLCJwYWdpbmF0aW9uIiwibmdNb2RlbCIsInVuZGVmaW5lZCIsImNvbnRleHQiLCJhdHRyaWJ1dGVzIiwiZmllbGROYW1lIiwiZmlsdGVyIiwiJGZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJ1c2VyIiwicm9sZXMiLCJlbWFpbCIsInVzZXJOYW1lIiwicm9sZSIsInB1c2giLCJuYW1lIiwibGVuZ3RoIiwidGl0bGUiLCJ1c2VycyIsImNvcHkiLCJ2aXNpdG9yIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJ2aXNpdG9ycyIsInYiLCJmdXp6eU1hdGNoUmFuZ2UiLCJkYXlzT2xkIiwiZGF5cyJdLCJtYXBwaW5ncyI6IkNBQ0EsV0FDSSxHQUFJQSxHQUFTQyxRQUFRRCxPQUFPLE9BQ3hCLGlCQUNBLGVBQ0EsWUFDQSxjQUNBLGNBQ0EsVUFHSkEsR0FBT0UsUUFBUSxlQUFnQixTQUFVQyxHQUNyQ0YsUUFBUUcsT0FBT0QsR0FDWEUsY0FBZSxxQkFDZkMsYUFBYSxFQUNiQyxXQUFXLEVBQ1hDLGFBQWEsRUFDYkMsVUFBVywyQkFDWEMsZ0JBQWlCLElBQ2pCQyxhQUNJQyxNQUFPLGNBQ1BDLEtBQU0sYUFDTkMsUUFBUyxnQkFDVEMsUUFBUyxpQkFFYkMsYUFBYyxnQkFDZEMsU0FBVSxLQUNWQyxRQUFTLEtBQ1RDLE1BQU8sS0FDUEMsYUFBYSxFQUNiQyxjQUFjLEVBQ2RDLFdBQ0lDLE1BQU8sOEJBQ1BDLFlBQWEsMkNBRWpCQyxRQUFTLElBQ1RDLFdBQVksY0FDWkMsV0FBWTtDQ3BDeEIsV0FHSSxRQUFTQyxHQUFXQyxHQUNoQixHQUFJQyxHQUFRQyxJQUVaRCxHQUFNRSxRQUFVLFdBQ1pDLFFBQVFDLElBQUksb0JBRVJKLEVBQU1LLFVBQ05MLEVBQU1NLEdBQUtOLEVBQU1LLFFBQVFDLElBRXpCTixFQUFNTSxJQUNOUCxFQUFNUSxJQUFJLGNBQWdCUCxFQUFNTSxJQUFJRSxLQUFLLFNBQVVDLEdBQy9DVCxFQUFNVSxPQUFTRCxFQUFFRSxPQUNsQkMsTUFBTSxTQUFVQyxHQUNmVixRQUFRQyxJQUFJLE1BQU9TLEVBQUlDLFlBTW5DZCxFQUFNZSxPQUFTLFdBQ1hmLEVBQU1nQixXQUdWaEIsRUFBTWlCLEtBQU8sV0FFVCxN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QVdDLEtBQUtJLFFBQVUsT0FBUyxPQUcxRXBELEVBQU1RLElBQUksZUFBaUI2QyxPQUFRcEQsRUFBTTZCLGNBQWVyQixLQUFLLFNBQVVDLEdBQ25FVCxFQUFNNEgsU0FBV25ILEVBQUVFLEtBQUswQyxRQUN4QnJELEVBQU02QixZQUFjcEIsRUFBRUUsV0FDZlgsR0FBTTZCLFlBQVl3QixXQUlqQ3JELEVBQU1zRCxNQUFRLFdBQ1Z0RCxFQUFNNkMsT0FBT2xCLElBNUVyQixHQUFJekQsR0FBU0MsUUFBUUQsT0FBTyxNQWlGNUJBLEdBQU9tRCxVQUFVLGVBRVRHLFlBQWEsMkNBQ2IxQixZQUFhLFFBQVMsWUFBYSxTQUFVQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9hcHAubW9kdWxlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcclxuICAgICAgICAnYXBwLmRpcmVjdGl2ZXMnLFxyXG4gICAgICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgICAgICd1aS5zbGlkZXInLFxyXG4gICAgICAgICdzbWFydC10YWJsZScsXHJcbiAgICAgICAgJ25nVGFnc0lucHV0JyxcclxuICAgICAgICAndG9hc3RyJ1xyXG4gICAgXSk7XHJcblxyXG4gICAgbW9kdWxlLmNvbmZpZyhbJ3RvYXN0ckNvbmZpZycsIGZ1bmN0aW9uICh0b2FzdHJDb25maWcpIHtcclxuICAgICAgICBhbmd1bGFyLmV4dGVuZCh0b2FzdHJDb25maWcsIHtcclxuICAgICAgICAgICAgcG9zaXRpb25DbGFzczogJ3RvYXN0LWJvdHRvbS1yaWdodCcsXHJcbiAgICAgICAgICAgIG5ld2VzdE9uVG9wOiB0cnVlLFxyXG4gICAgICAgICAgICBhbGxvd0h0bWw6IGZhbHNlLFxyXG4gICAgICAgICAgICBjbG9zZUJ1dHRvbjogZmFsc2UsXHJcbiAgICAgICAgICAgIGNsb3NlSHRtbDogJzxidXR0b24+JnRpbWVzOzwvYnV0dG9uPicsXHJcbiAgICAgICAgICAgIGV4dGVuZGVkVGltZU91dDogMTAwMCxcclxuICAgICAgICAgICAgaWNvbkNsYXNzZXM6IHtcclxuICAgICAgICAgICAgICAgIGVycm9yOiAndG9hc3QtZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgaW5mbzogJ3RvYXN0LWluZm8nLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogJ3RvYXN0LXN1Y2Nlc3MnLFxyXG4gICAgICAgICAgICAgICAgd2FybmluZzogJ3RvYXN0LXdhcm5pbmcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VDbGFzczogJ3RvYXN0LW1lc3NhZ2UnLFxyXG4gICAgICAgICAgICBvbkhpZGRlbjogbnVsbCxcclxuICAgICAgICAgICAgb25TaG93bjogbnVsbCxcclxuICAgICAgICAgICAgb25UYXA6IG51bGwsXHJcbiAgICAgICAgICAgIHByb2dyZXNzQmFyOiBmYWxzZSxcclxuICAgICAgICAgICAgdGFwVG9EaXNtaXNzOiB0cnVlLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZXM6IHtcclxuICAgICAgICAgICAgICAgIHRvYXN0OiAnZGlyZWN0aXZlcy90b2FzdC90b2FzdC5odG1sJyxcclxuICAgICAgICAgICAgICAgIHByb2dyZXNzYmFyOiAnZGlyZWN0aXZlcy9wcm9ncmVzc2Jhci9wcm9ncmVzc2Jhci5odG1sJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aW1lT3V0OiA1MDAwLFxyXG4gICAgICAgICAgICB0aXRsZUNsYXNzOiAndG9hc3QtdGl0bGUnLFxyXG4gICAgICAgICAgICB0b2FzdENsYXNzOiAndG9hc3QnXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XSk7XHJcblxyXG59XHJcbikoKTsiLCIvL2NlbnNvci1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NlbnNvciBlZGl0IGluaXQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9ICRjdHJsLnJlc29sdmUuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRjdHJsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9jZW5zb3IvJyArICRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29yID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NhdmUgY2Vuc29yJywgJGN0cmwuY2Vuc29yKTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS9jZW5zb3InLCAkY3RybC5jZW5zb3IpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLmNlbnNvciwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwuY2Vuc29yKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnY2Vuc29yRWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJzwnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jZW5zb3JzL2NlbnNvci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vY2Vuc29yLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICRtb2RhbCwgdG9hc3RyKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuICAgICAgICB2YXIgcGFnZVNpemVEZWZhdWx0ID0gMTA7XHJcbiAgICAgICAgdmFyIHRhYmxlU3RhdGVSZWY7XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0ge1xyXG4gICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVEZWZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NlbnNvciBsaXN0IGluaXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnY2Vuc29yRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29ycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnU2F2ZWQgQ2Vuc29yJyk7IFxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NlbnNvckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogYy5pZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoYywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdVcGRhdGVkIENlbnNvcicpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvY2Vuc29yLycgKyBjLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJGN0cmwuY2Vuc29ycy5pbmRleE9mKGMpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29ycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCdEZWxldGVkIGNlbnNvcicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaCA9IGZ1bmN0aW9uICh0YWJsZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHRhYmxlU3RhdGVSZWYgPSB0YWJsZVN0YXRlO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mICh0YWJsZVN0YXRlLnNvcnQucHJlZGljYXRlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwub3JkZXJCeSA9IHRhYmxlU3RhdGUuc29ydC5wcmVkaWNhdGU7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbC5vcmRlckRpcmVjdGlvbiA9IHRhYmxlU3RhdGUuc29ydC5yZXZlcnNlID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvY2Vuc29yJywgeyBwYXJhbXM6ICRjdHJsLnNlYXJjaE1vZGVsIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMgPSByLmRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICRjdHJsLnNlYXJjaE1vZGVsLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwucGFnZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLnNlYXJjaCh0YWJsZVN0YXRlUmVmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnY2Vuc29yTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jZW5zb3JzL2NlbnNvci1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCAndG9hc3RyJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy9jb25maWd1cmF0aW9uLXNldHRpbmcuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsIHRvYXN0cikge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGh1YiA9ICQuY29ubmVjdGlvbi5uYW1lTm90aWZpY2F0aW9uSHViO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY29uZmlndXJhdGlvbiBzZXR0aW5nIGluaXQnKTtcclxuICAgICAgICAgICAgJC5jb25uZWN0aW9uLmh1Yi5zdGFydCgpLmRvbmUoZnVuY3Rpb24oKXsgY29uc29sZS5sb2coJ2h1YiBjb25uZWN0aW9uIHN0YXJ0ZWQnKTsgfSk7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL2NvbmZpZ3VyYXRpb24nKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5jb25maWd1cmF0aW9uID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ0xvYWRlZCBjb25maWd1cmF0aW9uJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL2NvbmZpZ3VyYXRpb24nLCAkY3RybC5jb25maWd1cmF0aW9uKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5jb25maWd1cmF0aW9uLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ0NvbmZpZ3VyYXRpb24gU2F2ZWQnKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuZXJyb3IoJ0Vycm9yIFNhdmluZyBDb25maWd1cmF0aW9uJyk7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaHViLnNlcnZlci5jb25maWd1cmF0aW9uQ2hhbmdlKCRjdHJsLmNvbmZpZ3VyYXRpb24pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY29uZmlndXJhdGlvbiBzZW50IHRvIGh1YicpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ2NvbmZpZ3VyYXRpb25TZXR0aW5nJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbmZpZ3VyYXRpb24vY29uZmlndXJhdGlvbi1zZXR0aW5nLmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICd0b2FzdHInLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiLCIvL2Rhc2hib2FyZC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkYXNoYm9hcmQgaW5pdCcpO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS92aXNpdG9yL3N1bW1hcnknKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zdW1tYXJ5ID0gci5kYXRhO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVycik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdkYXNoYm9hcmQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvZGFzaGJvYXJkL2Rhc2hib2FyZC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy9kaXJlY3RpdmVzLm1vZHVsZXMuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJywgW10pOyBcclxufSkoKTsiLCIvL3N0VGFibGUuZGlyZWN0aXZlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoJ3N0U3VibWl0U2VhcmNoJywgWydzdENvbmZpZycsICckdGltZW91dCcsICckcGFyc2UnLCBmdW5jdGlvbiAoc3RDb25maWcsICR0aW1lb3V0LCAkcGFyc2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiAnXnN0VGFibGUnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUN0cmwgPSBjdHJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcImNsZWFyS2V5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgZWwub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDI3KSB7IHJldHVybjsgfSAvLyBjaGVjayBrZXkgaG93IHlvdSB3YW50XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJzdFJlc2V0U2VhcmNoXCIsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogWydec3RUYWJsZScsICdebmdNb2RlbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZGVsLiR2aWV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLiR2aWV3VmFsdWVba2V5XSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBfLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpLCAncGFnZScpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuJHZpZXdWYWx1ZVtrZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTdGF0ZSA9IGN0cmwudGFibGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnNlYXJjaC5wcmVkaWNhdGVPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5wYWdpbmF0aW9uLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcInN0Q2xlYXJLZXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiBbJ15zdFRhYmxlJywgJ15uZ01vZGVsJ10sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5nTW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29udGV4dC5hdHRyaWJ1dGVzWydzdC1zZWFyY2gnXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWxlbWVudC5jb250ZXh0LmF0dHJpYnV0ZXNbJ3N0LXNlYXJjaCddLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVN0YXRlID0gY3RybC50YWJsZVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5zZWFyY2gucHJlZGljYXRlT2JqZWN0W2ZpZWxkTmFtZV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7IC8vIHdpbGwgdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vZmlsdGVycy5qc1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmlsdGVyKCdwZXJjZW50YWdlJywgWyckZmlsdGVyJywgZnVuY3Rpb24gKCRmaWx0ZXIpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBkZWNpbWFscykge1xyXG4gICAgICAgICAgICByZXR1cm4gJGZpbHRlcignbnVtYmVyJykoaW5wdXQgKiAxMDAsIGRlY2ltYWxzKSArICclJztcclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG4gICAgfVxyXG4pKCk7IiwiLy91c2VyLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXNlciBlZGl0IGluaXQnKTtcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnVzZXIgPSAkY3RybC5yZXNvbHZlLnVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvdXNlci9yb2xlcycpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnJvbGVzID0gci5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkY3RybC51c2VyLmVtYWlsKSAkY3RybC51c2VyLmVtYWlsID0gJGN0cmwudXNlci51c2VyTmFtZSArICdAc3BsY2VudGVyLm9yZyc7XHJcblxyXG4gICAgICAgICAgICB2YXIgcm9sZXMgPSBbXTtcclxuICAgICAgICAgICAgXy5mb3JFYWNoKCRjdHJsLnVzZXIucm9sZXMsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGVzLnB1c2gocm9sZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocm9sZXMubGVuZ3RoID09PSAwKSByb2xlcy5wdXNoKCd1c2VyJyk7XHJcbiAgICAgICAgICAgICRjdHJsLnVzZXIucm9sZXMgPSByb2xlcztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvdXNlci91cGRhdGUnLCAkY3RybC51c2VyKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC51c2VyLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC51c2VyKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndXNlckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdXNlcnMvdXNlci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3VzZXItbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCwgJG1vZGFsLCB0b2FzdHIpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC50aXRsZSA9ICdVc2Vycyc7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3VzZXInKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC51c2VycyA9IHIuZGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIC8vVE9ETzogcmV0dXJuIHJvbGVzIGRpc3BsYXkgYnJva2VuXHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3VzZXJFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7IG1vZGFsSW5zdGFuY2U6IFwiPFwiIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VyID0gcmVzdWx0OyBcclxuICAgICAgICAgICAgICAgIHZhciByb2xlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgXy5mb3JFYWNoKHJlc3VsdC5yb2xlcyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncm9sZScsIHJvbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlcy5wdXNoKHJvbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdXNlci5yb2xlcyA9IFtdOyBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQnLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgIHVzZXIucm9sZXMgPSBbXSA9IHJvbGVzO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvbGVzJywgcm9sZXMpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Jlc3VsdCcsIHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudXNlcnMudW5zaGlmdCh1c2VyKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdDcmVhdGVkIFVzZXInKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd1c2VyRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczogeyBtb2RhbEluc3RhbmNlOiBcIjxcIiB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogeyB1c2VyOiBhbmd1bGFyLmNvcHkoaXRlbSkgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoaXRlbSwgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdVcGRhdGVkIFVzZXInKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZWFzb24pIHsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5kZWxldGUgPSBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAkaHR0cC5kZWxldGUoJ2FwaS91c2VyLycgKyBjLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJGN0cmwudXNlcnMuaW5kZXhPZihjKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLnVzZXJzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLndhcm5pbmcoJ0RlbGV0ZWQgVXNlcicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3VzZXJMaXN0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3VzZXJzL3VzZXItbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCAnJHVpYk1vZGFsJywgJ3RvYXN0cicsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3Zpc2l0b3ItZWRpdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2aXNpdG9yIGVkaXQgaW5pdCcpO1xyXG5cclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnTmV3IFZpc2l0b3InO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gJGN0cmwucmVzb2x2ZS5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3Zpc2l0b3IvJyArICRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9yID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnRpdGxlID0gKCRjdHJsLnZpc2l0b3IuZmlyc3RuYW1lICsgJyAnICsgJGN0cmwudmlzaXRvci5sYXN0bmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlIHZpc2l0b3InLCAkY3RybC52aXNpdG9yKTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS92aXNpdG9yJywgJGN0cmwudmlzaXRvcikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwudmlzaXRvciwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwudmlzaXRvcik7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd2aXNpdG9yRWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJzwnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aXNpdG9ycy92aXNpdG9yLWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy92aXNpdG9yLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICRtb2RhbCwgdG9hc3RyKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpczsgXHJcbiAgICAgICAgdmFyIHBhZ2VTaXplRGVmYXVsdCA9IDEwO1xyXG4gICAgICAgIHZhciB0YWJsZVN0YXRlUmVmO1xyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHtcclxuICAgICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplRGVmYXVsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2luaXQgdmlzaXRvciBsaXN0Jyk7XHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ1Zpc2l0b3JzJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAndmlzaXRvckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnZpc2l0b3JzLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdDcmVhdGVkIFZpc2l0b3InKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Zpc2l0b3JFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHYuaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHYsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnVXBkYXRlZCBWaXNpdG9yJyk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5kZWxldGUgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnYXBpL3Zpc2l0b3IvJyArIHYuaWQpLnRoZW4oZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLnZpc2l0b3JzLmluZGV4T2Yodik7XHJcbiAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9ycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCdEZWxldGVkIFZpc2l0b3InKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2ggPSBmdW5jdGlvbiAodGFibGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0YWJsZVN0YXRlUmVmID0gdGFibGVTdGF0ZTtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwuZnV6enlNYXRjaFJhbmdlID0gJGN0cmwuZnV6enlNYXRjaFJhbmdlOyBcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwuZGF5c09sZCA9ICRjdHJsLmRheXM7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mICh0YWJsZVN0YXRlLnNvcnQucHJlZGljYXRlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwub3JkZXJCeSA9IHRhYmxlU3RhdGUuc29ydC5wcmVkaWNhdGU7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbC5vcmRlckRpcmVjdGlvbiA9IHRhYmxlU3RhdGUuc29ydC5yZXZlcnNlID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3Zpc2l0b3InLCB7IHBhcmFtczogJGN0cmwuc2VhcmNoTW9kZWwgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudmlzaXRvcnMgPSByLmRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICRjdHJsLnNlYXJjaE1vZGVsLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwucGFnZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLnNlYXJjaCh0YWJsZVN0YXRlUmVmKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3Zpc2l0b3JMaXN0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3Zpc2l0b3JzL3Zpc2l0b3ItbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCAnJHVpYk1vZGFsJywgJ3RvYXN0cicsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyJdfQ==
