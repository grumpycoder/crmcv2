!function(){angular.module("app",["app.directives","ui.bootstrap","ui.slider","smart-table","ngTagsInput"])}();
!function(){function n(n){var e=this;e.$onInit=function(){console.log("censor edit init"),e.resolve&&(e.id=e.resolve.id),e.id&&n.get("api/censor/"+e.id).then(function(n){e.censor=n.data}).catch(function(n){console.log("err",n.message)})},e.cancel=function(){e.dismiss()},e.save=function(){return console.log("save censor",e.censor),n.post("api/censor",e.censor).then(function(n){angular.extend(e.censor,n.data),e.modalInstance.close(e.censor)}).catch(function(n){console.error("something went wrong",n.message)})}}var e=angular.module("app");e.component("censorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/censors/censor-edit.component.html",controller:["$http",n]})}();
!function(){function e(e,n){var o,t=this,s=10;t.searchModel={page:1,pageSize:s},t.$onInit=function(){console.log("censor list init")},t.create=function(){n.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(e){t.censors.unshift(e)},function(e){})},t.edit=function(e){n.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"md"}).result.then(function(n){angular.extend(e,n)},function(e){})},t.delete=function(n){e.delete("api/censor/"+n.id).then(function(e){var o=t.censors.indexOf(n);t.censors.splice(o,1)})},t.search=function(n){o=n,"undefined"!=typeof n.sort.predicate&&(t.searchModel.orderBy=n.sort.predicate,t.searchModel.orderDirection=n.sort.reverse?"desc":"asc"),e.get("api/censor",{params:t.searchModel}).then(function(e){t.censors=e.data.results,t.searchModel=e.data,delete t.searchModel.results})},t.paged=function(){t.search(o)}}var n=angular.module("app");n.component("censorList",{templateUrl:"app/censors/censor-list.component.html",controller:["$http","$uibModal",e]})}();
!function(){function n(n){var o=this,t=$.connection.nameNotificationHub;o.$onInit=function(){console.log("configuration setting init"),$.connection.hub.start().done(function(){console.log("hub connection started")}),n.get("api/configuration").then(function(n){o.configuration=n.data})},o.cancel=function(){o.dismiss()},o.save=function(){return n.post("api/configuration",o.configuration).then(function(n){angular.extend(o.configuration,n.data)}).catch(function(n){console.error("something went wrong",n.message)}).finally(function(){t.server.configurationChange(o.configuration).then(function(n){console.log("configuration sent to hub")})})}}var o=angular.module("app");o.component("configurationSetting",{templateUrl:"app/configuration/configuration-setting.component.html",controller:["$http",n]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){angular.module("app").filter("percentage",["$filter",function(n){return function(e,r){return n("number")(100*e,r)+"%"}}])}();
!function(){function e(e){var s=this;s.$onInit=function(){console.log("user edit init"),s.resolve&&(s.user=s.resolve.user),e.get("api/user/roles").then(function(e){s.roles=e.data})},s.cancel=function(){s.dismiss()},s.save=function(){s.user.email||(s.user.email=s.user.userName+"@splcenter.org");var n=[];return _.forEach(s.user.roles,function(e){n.push(e.name)}),0===n.length&&n.push("user"),s.user.roles=n,e.post("api/user/update",s.user).then(function(e){angular.extend(s.user,e.data),s.modalInstance.close(s.user)}).catch(function(e){console.error("something went wrong",e.message)})}}var s=angular.module("app");s.component("userEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/users/user-edit.component.html",controller:["$http",e]})}();
!function(){function e(e,n){var o=this;o.$onInit=function(){o.title="Users",e.get("api/user").then(function(e){o.users=e.data})},o.create=function(){n.open({component:"userEdit",bindings:{modalInstance:"<"},size:"md"}).result.then(function(e){var n=e,t=[];_.forEach(e.roles,function(e){console.log("role",e),t.push(e)}),n.roles=[],console.log("result",n),n.roles=[]=t,console.log("roles",t),console.log("result",n),o.users.unshift(n)},function(e){})},o.edit=function(e){n.open({component:"userEdit",bindings:{modalInstance:"<"},resolve:{user:angular.copy(e)},size:"md"}).result.then(function(n){console.log("result",n),angular.extend(e,n)},function(e){})},o.delete=function(n){e.delete("api/user/"+n.id).then(function(e){var t=o.users.indexOf(n);o.users.splice(t,1)})}}var n=angular.module("app");n.component("userList",{templateUrl:"app/users/user-list.component.html",controller:["$http","$uibModal",e]})}();
!function(){function i(i){var t=this;t.$onInit=function(){console.log("visitor edit init"),t.title="New Visitor",t.resolve&&(t.id=t.resolve.id),t.id&&i.get("api/visitor/"+t.id).then(function(i){t.visitor=i.data,t.title=t.visitor.firstname+" "+t.visitor.lastname}).catch(function(i){console.log("err",i.message)})},t.cancel=function(){t.dismiss()},t.save=function(){return console.log("save visitor",t.visitor),i.post("api/visitor",t.visitor).then(function(i){angular.extend(t.visitor,i.data),t.modalInstance.close(t.visitor)}).catch(function(i){console.error("something went wrong",i.message)})}}var t=angular.module("app");t.component("visitorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/visitors/visitor-edit.component.html",controller:["$http",i]})}();
!function(){function e(e,t){var i,n=this,o=10;n.searchModel={page:1,pageSize:o},n.$onInit=function(){console.log("init visitor list"),n.title="Visitors"},n.create=function(){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(e){n.visitors.unshift(e)},function(e){})},n.edit=function(e){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"md"}).result.then(function(t){angular.extend(e,t)},function(e){})},n.delete=function(t){e.delete("api/visitor/"+t.id).then(function(e){var i=n.visitors.indexOf(t);n.visitors.splice(i,1)})},n.search=function(t){i=t,n.searchModel.fuzzyMatchRange=n.fuzzyMatchRange,n.searchModel.daysOld=n.days,"undefined"!=typeof t.sort.predicate&&(n.searchModel.orderBy=t.sort.predicate,n.searchModel.orderDirection=t.sort.reverse?"desc":"asc"),e.get("api/visitor",{params:n.searchModel}).then(function(e){n.visitors=e.data.results,n.searchModel=e.data,delete n.searchModel.results})},n.paged=function(){n.search(i)}}var t=angular.module("app");t.component("visitorList",{templateUrl:"app/visitors/visitor-list.component.html",controller:["$http","$uibModal",e]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjZW5zb3JzL2NlbnNvci1lZGl0LmNvbXBvbmVudC5qcyIsImNlbnNvcnMvY2Vuc29yLWxpc3QuY29tcG9uZW50LmpzIiwiY29uZmlndXJhdGlvbi9jb25maWd1cmF0aW9uLXNldHRpbmcuY29tcG9uZW50LmpzIiwiZGlyZWN0aXZlcy9kaXJlY3RpdmVzLm1vZHVsZXMuanMiLCJkaXJlY3RpdmVzL3N0VGFibGUuZGlyZWN0aXZlLmpzIiwiZmlsdGVycy9maWx0ZXJzLmpzIiwidXNlcnMvdXNlci1lZGl0LmNvbXBvbmVudC5qcyIsInVzZXJzL3VzZXItbGlzdC5jb21wb25lbnQuanMiLCJ2aXNpdG9ycy92aXNpdG9yLWVkaXQuY29tcG9uZW50LmpzIiwidmlzaXRvcnMvdmlzaXRvci1saXN0LmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRodHRwIiwiJGN0cmwiLCJ0aGlzIiwiJG9uSW5pdCIsImNvbnNvbGUiLCJsb2ciLCJyZXNvbHZlIiwiaWQiLCJnZXQiLCJ0aGVuIiwiciIsImNlbnNvciIsImRhdGEiLCJjYXRjaCIsImVyciIsIm1lc3NhZ2UiLCJjYW5jZWwiLCJkaXNtaXNzIiwic2F2ZSIsInBvc3QiLCJleHRlbmQiLCJtb2RhbEluc3RhbmNlIiwiY2xvc2UiLCJlcnJvciIsImNvbXBvbmVudCIsImJpbmRpbmdzIiwiaXRlbSIsInRlbXBsYXRlVXJsIiwiJG1vZGFsIiwidGFibGVTdGF0ZVJlZiIsInBhZ2VTaXplRGVmYXVsdCIsInNlYXJjaE1vZGVsIiwicGFnZSIsInBhZ2VTaXplIiwiY3JlYXRlIiwib3BlbiIsInNpemUiLCJyZXN1bHQiLCJjZW5zb3JzIiwidW5zaGlmdCIsInJlYXNvbiIsImVkaXQiLCJjIiwiZGVsZXRlIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsInNlYXJjaCIsInRhYmxlU3RhdGUiLCJzb3J0Iiwib3JkZXJCeSIsInByZWRpY2F0ZSIsIm9yZGVyRGlyZWN0aW9uIiwicmV2ZXJzZSIsInBhcmFtcyIsInJlc3VsdHMiLCJwYWdlZCIsImh1YiIsIiQiLCJjb25uZWN0aW9uIiwibmFtZU5vdGlmaWNhdGlvbkh1YiIsInN0YXJ0IiwiZG9uZSIsImNvbmZpZ3VyYXRpb24iLCJmaW5hbGx5Iiwic2VydmVyIiwiY29uZmlndXJhdGlvbkNoYW5nZSIsImRpcmVjdGl2ZSIsInN0Q29uZmlnIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHIiLCJjdHJsIiwiYmluZCIsInRhYmxlQ3RybCIsInBpcGUiLCJyZXN0cmljdCIsImVsIiwiYXR0cnMiLCJvbiIsImV2ZW50Iiwid2hpY2giLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiRhcHBseSIsImN0cmxzIiwibW9kZWwiLCJmb3JFYWNoIiwiJHZpZXdWYWx1ZSIsInZhbHVlIiwia2V5IiwidG9Mb3dlckNhc2UiLCJBcnJheSIsImlzQXJyYXkiLCJfIiwiaW5jbHVkZXMiLCJwcmVkaWNhdGVPYmplY3QiLCJwYWdpbmF0aW9uIiwibmdNb2RlbCIsInVuZGVmaW5lZCIsImNvbnRleHQiLCJhdHRyaWJ1dGVzIiwiZmllbGROYW1lIiwiZmlsdGVyIiwiJGZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJ1c2VyIiwicm9sZXMiLCJlbWFpbCIsInVzZXJOYW1lIiwicm9sZSIsInB1c2giLCJuYW1lIiwibGVuZ3RoIiwidGl0bGUiLCJ1c2VycyIsImNvcHkiLCJ2aXNpdG9yIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJ2aXNpdG9ycyIsInYiLCJmdXp6eU1hdGNoUmFuZ2UiLCJkYXlzT2xkIiwiZGF5cyJdLCJtYXBwaW5ncyI6IkNBQ0EsV0FDaUJBLFFBQVFDLE9BQU8sT0FBUSxpQkFBa0IsZUFBZ0IsWUFBYSxjQUFlO0NDRHRHLFdBR0ksUUFBU0MsR0FBV0MsR0FDaEIsR0FBSUMsR0FBUUMsSUFFWkQsR0FBTUUsUUFBVSxXQUNaQyxRQUFRQyxJ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ZSI6ImFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvL2FwcC5tb2R1bGUuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbJ2FwcC5kaXJlY3RpdmVzJywgJ3VpLmJvb3RzdHJhcCcsICd1aS5zbGlkZXInLCAnc21hcnQtdGFibGUnLCAnbmdUYWdzSW5wdXQnXSk7XHJcbiAgICB9XHJcbikoKTsiLCIvL2NlbnNvci1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NlbnNvciBlZGl0IGluaXQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9ICRjdHJsLnJlc29sdmUuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRjdHJsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9jZW5zb3IvJyArICRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29yID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnInLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3NhdmUgY2Vuc29yJywgJGN0cmwuY2Vuc29yKTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS9jZW5zb3InLCAkY3RybC5jZW5zb3IpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLmNlbnNvciwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwuY2Vuc29yKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnY2Vuc29yRWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJzwnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jZW5zb3JzL2NlbnNvci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vY2Vuc29yLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICRtb2RhbCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHBhZ2VTaXplRGVmYXVsdCA9IDEwO1xyXG4gICAgICAgIHZhciB0YWJsZVN0YXRlUmVmO1xyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHtcclxuICAgICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplRGVmYXVsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjZW5zb3IgbGlzdCBpbml0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NlbnNvckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMudW5zaGlmdChyZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZWRpdCA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NlbnNvckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogYy5pZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoYywgcmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmRlbGV0ZSA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnYXBpL2NlbnNvci8nICsgYy5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLmNlbnNvcnMuaW5kZXhPZihjKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoID0gZnVuY3Rpb24gKHRhYmxlU3RhdGUpIHtcclxuICAgICAgICAgICAgdGFibGVTdGF0ZVJlZiA9IHRhYmxlU3RhdGU7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgKHRhYmxlU3RhdGUuc29ydC5wcmVkaWNhdGUpICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbC5vcmRlckJ5ID0gdGFibGVTdGF0ZS5zb3J0LnByZWRpY2F0ZTtcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsLm9yZGVyRGlyZWN0aW9uID0gdGFibGVTdGF0ZS5zb3J0LnJldmVyc2UgPyAnZGVzYycgOiAnYXNjJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9jZW5zb3InLCB7IHBhcmFtczogJGN0cmwuc2VhcmNoTW9kZWwgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29ycyA9IHIuZGF0YS5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwgPSByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgJGN0cmwuc2VhcmNoTW9kZWwucmVzdWx0cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wYWdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoKHRhYmxlU3RhdGVSZWYpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdjZW5zb3JMaXN0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NlbnNvcnMvY2Vuc29yLWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vY29uZmlndXJhdGlvbi1zZXR0aW5nLmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuICAgICAgICB2YXIgaHViID0gJC5jb25uZWN0aW9uLm5hbWVOb3RpZmljYXRpb25IdWI7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25maWd1cmF0aW9uIHNldHRpbmcgaW5pdCcpO1xyXG4gICAgICAgICAgICAkLmNvbm5lY3Rpb24uaHViLnN0YXJ0KCkuZG9uZShmdW5jdGlvbigpeyBjb25zb2xlLmxvZygnaHViIGNvbm5lY3Rpb24gc3RhcnRlZCcpOyB9KTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvY29uZmlndXJhdGlvbicpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNvbmZpZ3VyYXRpb24gPSByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL2NvbmZpZ3VyYXRpb24nLCAkY3RybC5jb25maWd1cmF0aW9uKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5jb25maWd1cmF0aW9uLCByLmRhdGEpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBodWIuc2VydmVyLmNvbmZpZ3VyYXRpb25DaGFuZ2UoJGN0cmwuY29uZmlndXJhdGlvbikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25maWd1cmF0aW9uIHNlbnQgdG8gaHViJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnY29uZmlndXJhdGlvblNldHRpbmcnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY29uZmlndXJhdGlvbi9jb25maWd1cmF0aW9uLXNldHRpbmcuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy9kaXJlY3RpdmVzLm1vZHVsZXMuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcC5kaXJlY3RpdmVzJywgW10pOyBcclxufSkoKTsiLCIvL3N0VGFibGUuZGlyZWN0aXZlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycpO1xyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoJ3N0U3VibWl0U2VhcmNoJywgWydzdENvbmZpZycsICckdGltZW91dCcsICckcGFyc2UnLCBmdW5jdGlvbiAoc3RDb25maWcsICR0aW1lb3V0LCAkcGFyc2UpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1aXJlOiAnXnN0VGFibGUnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUN0cmwgPSBjdHJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcImNsZWFyS2V5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgZWwub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDI3KSB7IHJldHVybjsgfSAvLyBjaGVjayBrZXkgaG93IHlvdSB3YW50XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJzdFJlc2V0U2VhcmNoXCIsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogWydec3RUYWJsZScsICdebmdNb2RlbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZGVsLiR2aWV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLiR2aWV3VmFsdWVba2V5XSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBfLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpLCAncGFnZScpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuJHZpZXdWYWx1ZVtrZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTdGF0ZSA9IGN0cmwudGFibGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnNlYXJjaC5wcmVkaWNhdGVPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5wYWdpbmF0aW9uLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcInN0Q2xlYXJLZXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiBbJ15zdFRhYmxlJywgJ15uZ01vZGVsJ10sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5nTW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29udGV4dC5hdHRyaWJ1dGVzWydzdC1zZWFyY2gnXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWxlbWVudC5jb250ZXh0LmF0dHJpYnV0ZXNbJ3N0LXNlYXJjaCddLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVN0YXRlID0gY3RybC50YWJsZVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5zZWFyY2gucHJlZGljYXRlT2JqZWN0W2ZpZWxkTmFtZV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7IC8vIHdpbGwgdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vZmlsdGVycy5qc1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnYXBwJykuZmlsdGVyKCdwZXJjZW50YWdlJywgWyckZmlsdGVyJywgZnVuY3Rpb24gKCRmaWx0ZXIpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlucHV0LCBkZWNpbWFscykge1xyXG4gICAgICAgICAgICByZXR1cm4gJGZpbHRlcignbnVtYmVyJykoaW5wdXQgKiAxMDAsIGRlY2ltYWxzKSArICclJztcclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG4gICAgfVxyXG4pKCk7IiwiLy91c2VyLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndXNlciBlZGl0IGluaXQnKTtcclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnVzZXIgPSAkY3RybC5yZXNvbHZlLnVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvdXNlci9yb2xlcycpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnJvbGVzID0gci5kYXRhO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKCEkY3RybC51c2VyLmVtYWlsKSAkY3RybC51c2VyLmVtYWlsID0gJGN0cmwudXNlci51c2VyTmFtZSArICdAc3BsY2VudGVyLm9yZyc7XHJcblxyXG4gICAgICAgICAgICB2YXIgcm9sZXMgPSBbXTtcclxuICAgICAgICAgICAgXy5mb3JFYWNoKCRjdHJsLnVzZXIucm9sZXMsXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocm9sZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGVzLnB1c2gocm9sZS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAocm9sZXMubGVuZ3RoID09PSAwKSByb2xlcy5wdXNoKCd1c2VyJyk7XHJcbiAgICAgICAgICAgICRjdHJsLnVzZXIucm9sZXMgPSByb2xlcztcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvdXNlci91cGRhdGUnLCAkY3RybC51c2VyKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC51c2VyLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC51c2VyKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndXNlckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdXNlcnMvdXNlci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3VzZXItbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCwgJG1vZGFsKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnVXNlcnMnO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS91c2VyJykudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudXNlcnMgPSByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL1RPRE86IHJldHVybiByb2xlcyBkaXNwbGF5IGJyb2tlblxyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd1c2VyRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczogeyBtb2RhbEluc3RhbmNlOiBcIjxcIiB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHJlc3VsdDsgXHJcbiAgICAgICAgICAgICAgICB2YXIgcm9sZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChyZXN1bHQucm9sZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJvbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvbGUnLCByb2xlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZXMucHVzaChyb2xlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHVzZXIucm9sZXMgPSBbXTsgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0JywgdXNlcik7XHJcbiAgICAgICAgICAgICAgICB1c2VyLnJvbGVzID0gW10gPSByb2xlcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb2xlcycsIHJvbGVzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQnLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLnVzZXJzLnVuc2hpZnQodXNlcik7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAndXNlckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHsgbW9kYWxJbnN0YW5jZTogXCI8XCIgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHsgdXNlcjogYW5ndWxhci5jb3B5KGl0ZW0pIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0JywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGl0ZW0sIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVhc29uKSB7IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvdXNlci8nICsgYy5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLnVzZXJzLmluZGV4T2YoYyk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC51c2Vycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd1c2VyTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC91c2Vycy91c2VyLWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3Zpc2l0b3ItZWRpdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd2aXNpdG9yIGVkaXQgaW5pdCcpO1xyXG5cclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnTmV3IFZpc2l0b3InO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gJGN0cmwucmVzb2x2ZS5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3Zpc2l0b3IvJyArICRjdHJsLmlkKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9yID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnRpdGxlID0gKCRjdHJsLnZpc2l0b3IuZmlyc3RuYW1lICsgJyAnICsgJGN0cmwudmlzaXRvci5sYXN0bmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlIHZpc2l0b3InLCAkY3RybC52aXNpdG9yKTtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS92aXNpdG9yJywgJGN0cmwudmlzaXRvcikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwudmlzaXRvciwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwudmlzaXRvcik7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd2aXNpdG9yRWRpdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgaXRlbTogJzwnLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogJzwnLFxyXG4gICAgICAgICAgICAgICAgY2xvc2U6ICcmJyxcclxuICAgICAgICAgICAgICAgIGRpc21pc3M6ICcmJyxcclxuICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6ICc8J1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aXNpdG9ycy92aXNpdG9yLWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy92aXNpdG9yLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICRtb2RhbCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7IFxyXG4gICAgICAgIHZhciBwYWdlU2l6ZURlZmF1bHQgPSAxMDtcclxuICAgICAgICB2YXIgdGFibGVTdGF0ZVJlZjtcclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwgPSB7XHJcbiAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZURlZmF1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IHZpc2l0b3IgbGlzdCcpO1xyXG4gICAgICAgICAgICAkY3RybC50aXRsZSA9ICdWaXNpdG9ycyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Zpc2l0b3JFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9ycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd2aXNpdG9yRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiB2LmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2LCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAkaHR0cC5kZWxldGUoJ2FwaS92aXNpdG9yLycgKyB2LmlkKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZHggPSAkY3RybC52aXNpdG9ycy5pbmRleE9mKHYpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudmlzaXRvcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoID0gZnVuY3Rpb24gKHRhYmxlU3RhdGUpIHtcclxuICAgICAgICAgICAgdGFibGVTdGF0ZVJlZiA9IHRhYmxlU3RhdGU7XHJcbiAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsLmZ1enp5TWF0Y2hSYW5nZSA9ICRjdHJsLmZ1enp5TWF0Y2hSYW5nZTsgXHJcbiAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsLmRheXNPbGQgPSAkY3RybC5kYXlzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiAodGFibGVTdGF0ZS5zb3J0LnByZWRpY2F0ZSkgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsLm9yZGVyQnkgPSB0YWJsZVN0YXRlLnNvcnQucHJlZGljYXRlO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwub3JkZXJEaXJlY3Rpb24gPSB0YWJsZVN0YXRlLnNvcnQucmV2ZXJzZSA/ICdkZXNjJyA6ICdhc2MnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS92aXNpdG9yJywgeyBwYXJhbXM6ICRjdHJsLnNlYXJjaE1vZGVsIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnZpc2l0b3JzID0gci5kYXRhLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSAkY3RybC5zZWFyY2hNb2RlbC5yZXN1bHRzO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnBhZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5zZWFyY2godGFibGVTdGF0ZVJlZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd2aXNpdG9yTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aXNpdG9ycy92aXNpdG9yLWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyJdfQ==
