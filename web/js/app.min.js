!function(){var t=angular.module("app",["app.directives","ui.bootstrap","ui.slider","smart-table","ngTagsInput","ngAnimate","treasure-overlay-spinner","toastr"]);t.config(["toastrConfig",function(t){angular.extend(t,{positionClass:"toast-bottom-right",newestOnTop:!0,allowHtml:!1,closeButton:!1,closeHtml:"<button>&times;</button>",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",onHidden:null,onShown:null,onTap:null,progressBar:!1,tapToDismiss:!0,templates:{toast:"directives/toast/toast.html",progressbar:"directives/progressbar/progressbar.html"},timeOut:5e3,titleClass:"toast-title",toastClass:"toast"})}])}();
!function(){function n(n){var e=this;e.$onInit=function(){console.log("censor edit init"),e.resolve&&(e.id=e.resolve.id),e.id&&n.get("api/censor/"+e.id).then(function(n){e.censor=n.data}).catch(function(n){console.log("err",n.message)})},e.cancel=function(){e.dismiss()},e.save=function(){return console.log("save censor",e.censor),n.post("api/censor",e.censor).then(function(n){angular.extend(e.censor,n.data),e.modalInstance.close(e.censor)}).catch(function(n){console.error("something went wrong",n.message)})}}var e=angular.module("app");e.component("censorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/censors/censor-edit.component.html",controller:["$http",n]})}();
!function(){function e(e,n,o){var t,s=this,c=10;s.searchModel={page:1,pageSize:c},s.$onInit=function(){console.log("censor list init")},s.create=function(){n.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(e){s.censors.unshift(e),o.success("Saved Censor")},function(e){})},s.edit=function(e){n.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"md"}).result.then(function(n){angular.extend(e,n),o.success("Updated Censor")},function(e){})},s.delete=function(n){e.delete("api/censor/"+n.id).then(function(e){var t=s.censors.indexOf(n);s.censors.splice(t,1),o.warning("Deleted censor")})},s.search=function(n){s.loading=!0,t=n,"undefined"!=typeof n.sort.predicate&&(s.searchModel.orderBy=n.sort.predicate,s.searchModel.orderDirection=n.sort.reverse?"desc":"asc"),e.get("api/censor",{params:s.searchModel}).then(function(e){s.censors=e.data.results,s.searchModel=e.data,delete s.searchModel.results}).finally(function(){s.loading=!1})},s.paged=function(){s.search(t)}}var n=angular.module("app");n.component("censorList",{templateUrl:"app/censors/censor-list.component.html",controller:["$http","$uibModal","toastr",e]})}();
!function(){function n(n,o){var t=this,i=$.connection.nameNotificationHub;t.$onInit=function(){console.log("configuration setting init"),$.connection.hub.start().done(function(){console.log("hub connection started")}),n.get("api/configuration").then(function(n){t.configuration=n.data,o.success("Loaded configuration")})},t.cancel=function(){t.dismiss()},t.save=function(){return n.post("api/configuration",t.configuration).then(function(n){angular.extend(t.configuration,n.data),o.success("Configuration Saved")}).catch(function(n){console.error("something went wrong",n.message),o.error("Error Saving Configuration")}).finally(function(){i.server.configurationChange(t.configuration).then(function(n){console.log("configuration sent to hub")})})}}var o=angular.module("app");o.component("configurationSetting",{templateUrl:"app/configuration/configuration-setting.component.html",controller:["$http","toastr",n]})}();
!function(){function n(n){var o=this;o.$onInit=function(){console.log("dashboard init"),o.refresh()},o.refresh=function(){o.loading=!0,n.get("api/visitor/summary").then(function(n){o.summary=n.data}).catch(function(n){console.error("something went wrong",n)}).finally(function(n){o.loading=!1})}}var o=angular.module("app");o.component("dashboard",{templateUrl:"app/dashboard/dashboard.component.html",controller:["$http",n]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){angular.module("app").filter("percentage",["$filter",function(n){return function(e,r){return n("number")(100*e,r)+"%"}}])}();
!function(){function e(e){var s=this;s.$onInit=function(){console.log("user edit init"),s.resolve&&(s.user=s.resolve.user),e.get("api/user/roles").then(function(e){s.roles=e.data})},s.cancel=function(){s.dismiss()},s.save=function(){s.user.email||(s.user.email=s.user.userName+"@splcenter.org");var n=[];return _.forEach(s.user.roles,function(e){n.push(e.name)}),0===n.length&&n.push("user"),s.user.roles=n,e.post("api/user/update",s.user).then(function(e){angular.extend(s.user,e.data),s.modalInstance.close(s.user)}).catch(function(e){console.error("something went wrong",e.message)})}}var s=angular.module("app");s.component("userEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/users/user-edit.component.html",controller:["$http",e]})}();
!function(){function e(e,n,s){var t=this;t.$onInit=function(){t.title="Users",e.get("api/user").then(function(e){t.users=e.data})},t.create=function(){n.open({component:"userEdit",bindings:{modalInstance:"<"},size:"md"}).result.then(function(e){var n=e,o=[];_.forEach(e.roles,function(e){console.log("role",e),o.push(e)}),n.roles=[],console.log("result",n),n.roles=[]=o,console.log("roles",o),console.log("result",n),t.users.unshift(n),s.success("Created User")},function(e){})},t.edit=function(e){n.open({component:"userEdit",bindings:{modalInstance:"<"},resolve:{user:angular.copy(e)},size:"md"}).result.then(function(n){angular.extend(e,n),s.success("Updated User")},function(e){})},t.delete=function(n){e.delete("api/user/"+n.id).then(function(e){var o=t.users.indexOf(n);t.users.splice(o,1),s.warning("Deleted User")})}}var n=angular.module("app");n.component("userList",{templateUrl:"app/users/user-list.component.html",controller:["$http","$uibModal","toastr",e]})}();
!function(){function i(i){var t=this;t.$onInit=function(){console.log("visitor edit init"),t.title="New Visitor",t.resolve&&(t.id=t.resolve.id),t.id&&i.get("api/visitor/"+t.id).then(function(i){t.visitor=i.data,t.title=t.visitor.firstname+" "+t.visitor.lastname}).catch(function(i){console.log("err",i.message)})},t.cancel=function(){t.dismiss()},t.save=function(){return console.log("save visitor",t.visitor),i.post("api/visitor",t.visitor).then(function(i){angular.extend(t.visitor,i.data),t.modalInstance.close(t.visitor)}).catch(function(i){console.error("something went wrong",i.message)})}}var t=angular.module("app");t.component("visitorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/visitors/visitor-edit.component.html",controller:["$http",i]})}();
!function(){function e(e,t,i){var n,o=this,s=10;o.searchModel={page:1,pageSize:s},o.$onInit=function(){console.log("init visitor list"),o.title="Visitors"},o.create=function(){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(e){o.visitors.unshift(e),i.success("Created Visitor")},function(e){})},o.edit=function(e){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{id:e.id},size:"md"}).result.then(function(t){angular.extend(e,t),i.success("Updated Visitor")},function(e){})},o.delete=function(t){e.delete("api/visitor/"+t.id).then(function(e){var n=o.visitors.indexOf(t);o.visitors.splice(n,1),i.warning("Deleted Visitor")})},o.search=function(t){o.loading=!0,n=t,o.searchModel.fuzzyMatchRange=o.fuzzyMatchRange,o.searchModel.daysOld=o.days,"undefined"!=typeof t.sort.predicate&&(o.searchModel.orderBy=t.sort.predicate,o.searchModel.orderDirection=t.sort.reverse?"desc":"asc"),e.get("api/visitor",{params:o.searchModel}).then(function(e){o.visitors=e.data.results,o.searchModel=e.data,delete o.searchModel.results}).finally(function(){o.loading=!1})},o.paged=function(){o.search(n)}}var t=angular.module("app");t.component("visitorList",{templateUrl:"app/visitors/visitor-list.component.html",controller:["$http","$uibModal","toastr",e]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjZW5zb3JzL2NlbnNvci1lZGl0LmNvbXBvbmVudC5qcyIsImNlbnNvcnMvY2Vuc29yLWxpc3QuY29tcG9uZW50LmpzIiwiY29uZmlndXJhdGlvbi9jb25maWd1cmF0aW9uLXNldHRpbmcuY29tcG9uZW50LmpzIiwiZGFzaGJvYXJkL2Rhc2hib2FyZC5jb21wb25lbnQuanMiLCJkaXJlY3RpdmVzL2RpcmVjdGl2ZXMubW9kdWxlcy5qcyIsImRpcmVjdGl2ZXMvc3RUYWJsZS5kaXJlY3RpdmUuanMiLCJmaWx0ZXJzL2ZpbHRlcnMuanMiLCJ1c2Vycy91c2VyLWVkaXQuY29tcG9uZW50LmpzIiwidXNlcnMvdXNlci1saXN0LmNvbXBvbmVudC5qcyIsInZpc2l0b3JzL3Zpc2l0b3ItZWRpdC5jb21wb25lbnQuanMiLCJ2aXNpdG9ycy92aXNpdG9yLWxpc3QuY29tcG9uZW50LmpzIl0sIm5hbWVzIjpbIm1vZHVsZSIsImFuZ3VsYXIiLCJjb25maWciLCJ0b2FzdHJDb25maWciLCJleHRlbmQiLCJwb3NpdGlvbkNsYXNzIiwibmV3ZXN0T25Ub3AiLCJhbGxvd0h0bWwiLCJjbG9zZUJ1dHRvbiIsImNsb3NlSHRtbCIsImV4dGVuZGVkVGltZU91dCIsImljb25DbGFzc2VzIiwiZXJyb3IiLCJpbmZvIiwic3VjY2VzcyIsIndhcm5pbmciLCJtZXNzYWdlQ2xhc3MiLCJvbkhpZGRlbiIsIm9uU2hvd24iLCJvblRhcCIsInByb2dyZXNzQmFyIiwidGFwVG9EaXNtaXNzIiwidGVtcGxhdGVzIiwidG9hc3QiLCJwcm9ncmVzc2JhciIsInRpbWVPdXQiLCJ0aXRsZUNsYXNzIiwidG9hc3RDbGFzcyIsImNvbnRyb2xsZXIiLCIkaHR0cCIsIiRjdHJsIiwidGhpcyIsIiRvbkluaXQiLCJjb25zb2xlIiwibG9nIiwicmVzb2x2ZSIsImlkIiwiZ2V0IiwidGhlbiIsInIiLCJjZW5zb3IiLCJkYXRhIiwiY2F0Y2giLCJlcnIiLCJtZXNzYWdlIiwiY2FuY2VsIiwiZGlzbWlzcyIsInNhdmUiLCJwb3N0IiwibW9kYWxJbnN0YW5jZSIsImNsb3NlIiwiY29tcG9uZW50IiwiYmluZGluZ3MiLCJpdGVtIiwidGVtcGxhdGVVcmwiLCIkbW9kYWwiLCJ0b2FzdHIiLCJ0YWJsZVN0YXRlUmVmIiwicGFnZVNpemVEZWZhdWx0Iiwic2VhcmNoTW9kZWwiLCJwYWdlIiwicGFnZVNpemUiLCJjcmVhdGUiLCJvcGVuIiwic2l6ZSIsInJlc3VsdCIsImNlbnNvcnMiLCJ1bnNoaWZ0IiwicmVhc29uIiwiZWRpdCIsImMiLCJkZWxldGUiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwic2VhcmNoIiwidGFibGVTdGF0ZSIsImxvYWRpbmciLCJzb3J0Iiwib3JkZXJCeSIsInByZWRpY2F0ZSIsIm9yZGVyRGlyZWN0aW9uIiwicmV2ZXJzZSIsInBhcmFtcyIsInJlc3VsdHMiLCJmaW5hbGx5IiwicGFnZWQiLCJodWIiLCIkIiwiY29ubmVjdGlvbiIsIm5hbWVOb3RpZmljYXRpb25IdWIiLCJzdGFydCIsImRvbmUiLCJjb25maWd1cmF0aW9uIiwic2VydmVyIiwiY29uZmlndXJhdGlvbkNoYW5nZSIsInJlZnJlc2giLCJzdW1tYXJ5IiwiZSIsImRpcmVjdGl2ZSIsInN0Q29uZmlnIiwiJHRpbWVvdXQiLCIkcGFyc2UiLCJyZXF1aXJlIiwibGluayIsInNjb3BlIiwiZWxlbWVudCIsImF0dHIiLCJjdHJsIiwiYmluZCIsInRhYmxlQ3RybCIsInBpcGUiLCJyZXN0cmljdCIsImVsIiwiYXR0cnMiLCJvbiIsImV2ZW50Iiwid2hpY2giLCIkc2V0Vmlld1ZhbHVlIiwiJHJlbmRlciIsIiRhcHBseSIsImN0cmxzIiwibW9kZWwiLCJmb3JFYWNoIiwiJHZpZXdWYWx1ZSIsInZhbHVlIiwia2V5IiwidG9Mb3dlckNhc2UiLCJBcnJheSIsImlzQXJyYXkiLCJfIiwiaW5jbHVkZXMiLCJwcmVkaWNhdGVPYmplY3QiLCJwYWdpbmF0aW9uIiwibmdNb2RlbCIsInVuZGVmaW5lZCIsImNvbnRleHQiLCJhdHRyaWJ1dGVzIiwiZmllbGROYW1lIiwiZmlsdGVyIiwiJGZpbHRlciIsImlucHV0IiwiZGVjaW1hbHMiLCJ1c2VyIiwicm9sZXMiLCJlbWFpbCIsInVzZXJOYW1lIiwicm9sZSIsInB1c2giLCJuYW1lIiwibGVuZ3RoIiwidGl0bGUiLCJ1c2VycyIsImNvcHkiLCJ2aXNpdG9yIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJ2aXNpdG9ycyIsInYiLCJmdXp6eU1hdGNoUmFuZ2UiLCJkYXlzT2xkIiwiZGF5cyJdLCJtYXBwaW5ncyI6IkNBQ0EsV0FDSSxHQUFJQSxHQUFTQyxRQUFRRCxPQUFPLE9BQ3hCLGlCQUNBLGVBQ0EsWUFDQSxjQUNBLGNBQ0EsWUFDQSwyQkFDQSxVQUdKQSxHQUFPRSxRQUFRLGVBQWdCLFNBQVVDLEdBQ3JDRixRQUFRRyxPQUFPRCxHQUNYRSxjQUFlLHFCQUNmQyxhQUFhLEVBQ2JDLFdBQVcsRUFDWEMsYUFBYSxFQUNiQyxVQUFXLDJCQUNYQyxnQkFBaUIsSUFDakJDLGFBQ0lDLE1BQU8sY0FDUEMsS0FBTSxhQUNOQyxRQUFTLGdCQUNUQyxRQUFTLGlCQUViQyxhQUFjLGdCQUNkQyxTQUFVLEtBQ1ZDLFFBQVMsS0FDVEMsTUFBTyxLQUNQQyxhQUFhLEVBQ2JDLGNBQWMsRUFDZEMsV0FDSUMsTUFBTyw4QkFDUEMsWUFBYSwyQ0FFakJDLFFBQVMsSUFDVEMsV0FBWSxjQUNaQyxXQUFZO0NDdEN4QixXQUdJLFFBQVNDLEdBQVdDLEdBQ2hCLEdBQUlDLEdBQVFDLElBRVpELEdBQU1FLFFBQVUsV0FDWkMsUUFBUUMsSUFBSSxvQkFFUkosRUFBTUssVUFDTkwsRUFBTU0sR0FBS04sRUFBTUssUUFBUUMsSUFFekJOLEVBQU1NLElBQ05QLEVBQU1RLElBQUksY0FBZ0JQLEVBQU1NLElBQUlFLEtBQUssU0FBVUMsR0FDL0NULEVBQU1VLE9BQVNELEVBQUVFLE9BQ2xCQyxNQUFNLFNBQVVDLEdBQ2ZWLFFBQVFDLElBQUksTUFBT1MsRUFBSUMsWUFNbkNkLEVBQU1lLE9BQVMsV0FD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LEVBQU0rQyxTQUFVLEVBQ2hCcEIsRUFBZ0JtQixFQUNoQjlDLEVBQU02QixZQUFZb0csZ0JBQWtCakksRUFBTWlJLGdCQUMxQ2pJLEVBQU02QixZQUFZcUcsUUFBVWxJLEVBQU1tSSxLQUVTLG1CQUEvQnJGLEdBQVdFLEtBQWMsWUFDakNoRCxFQUFNNkIsWUFBWW9CLFFBQVVILEVBQVdFLEtBQUtFLFVBQzVDbEQsRUFBTTZCLFlBQVlzQixlQUFpQkwsRUFBV0UsS0FBS0ksUUFBVSxPQUFTLE9BRzFFckQsRUFBTVEsSUFBSSxlQUFpQjhDLE9BQVFyRCxFQUFNNkIsY0FBZXJCLEtBQUssU0FBVUMsR0FDbkVULEVBQU0rSCxTQUFXdEgsRUFBRUUsS0FBSzJDLFFBQ3hCdEQsRUFBTTZCLFlBQWNwQixFQUFFRSxXQUNmWCxHQUFNNkIsWUFBWXlCLFVBQzFCQyxRQUFRLFdBQ1B2RCxFQUFNK0MsU0FBVSxLQUl4Qi9DLEVBQU13RCxNQUFRLFdBQ1Z4RCxFQUFNNkMsT0FBT2xCLElBL0VyQixHQUFJekQsR0FBU0MsUUFBUUQsT0FBTyxNQW9GNUJBLEdBQU9tRCxVQUFVLGVBRVRHLFlBQWEsMkNBQ2IxQixZQUFhLFFBQVMsWUFBYSxTQUFVQSIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy9hcHAubW9kdWxlLmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtcclxuICAgICAgICAnYXBwLmRpcmVjdGl2ZXMnLFxyXG4gICAgICAgICd1aS5ib290c3RyYXAnLFxyXG4gICAgICAgICd1aS5zbGlkZXInLFxyXG4gICAgICAgICdzbWFydC10YWJsZScsXHJcbiAgICAgICAgJ25nVGFnc0lucHV0JyxcclxuICAgICAgICAnbmdBbmltYXRlJywgXHJcbiAgICAgICAgJ3RyZWFzdXJlLW92ZXJsYXktc3Bpbm5lcicsXHJcbiAgICAgICAgJ3RvYXN0cidcclxuICAgIF0pO1xyXG5cclxuICAgIG1vZHVsZS5jb25maWcoWyd0b2FzdHJDb25maWcnLCBmdW5jdGlvbiAodG9hc3RyQ29uZmlnKSB7XHJcbiAgICAgICAgYW5ndWxhci5leHRlbmQodG9hc3RyQ29uZmlnLCB7XHJcbiAgICAgICAgICAgIHBvc2l0aW9uQ2xhc3M6ICd0b2FzdC1ib3R0b20tcmlnaHQnLFxyXG4gICAgICAgICAgICBuZXdlc3RPblRvcDogdHJ1ZSxcclxuICAgICAgICAgICAgYWxsb3dIdG1sOiBmYWxzZSxcclxuICAgICAgICAgICAgY2xvc2VCdXR0b246IGZhbHNlLFxyXG4gICAgICAgICAgICBjbG9zZUh0bWw6ICc8YnV0dG9uPiZ0aW1lczs8L2J1dHRvbj4nLFxyXG4gICAgICAgICAgICBleHRlbmRlZFRpbWVPdXQ6IDEwMDAsXHJcbiAgICAgICAgICAgIGljb25DbGFzc2VzOiB7XHJcbiAgICAgICAgICAgICAgICBlcnJvcjogJ3RvYXN0LWVycm9yJyxcclxuICAgICAgICAgICAgICAgIGluZm86ICd0b2FzdC1pbmZvJyxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ICd0b2FzdC1zdWNjZXNzJyxcclxuICAgICAgICAgICAgICAgIHdhcm5pbmc6ICd0b2FzdC13YXJuaW5nJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBtZXNzYWdlQ2xhc3M6ICd0b2FzdC1tZXNzYWdlJyxcclxuICAgICAgICAgICAgb25IaWRkZW46IG51bGwsXHJcbiAgICAgICAgICAgIG9uU2hvd246IG51bGwsXHJcbiAgICAgICAgICAgIG9uVGFwOiBudWxsLFxyXG4gICAgICAgICAgICBwcm9ncmVzc0JhcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHRhcFRvRGlzbWlzczogdHJ1ZSxcclxuICAgICAgICAgICAgdGVtcGxhdGVzOiB7XHJcbiAgICAgICAgICAgICAgICB0b2FzdDogJ2RpcmVjdGl2ZXMvdG9hc3QvdG9hc3QuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICBwcm9ncmVzc2JhcjogJ2RpcmVjdGl2ZXMvcHJvZ3Jlc3NiYXIvcHJvZ3Jlc3NiYXIuaHRtbCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGltZU91dDogNTAwMCxcclxuICAgICAgICAgICAgdGl0bGVDbGFzczogJ3RvYXN0LXRpdGxlJyxcclxuICAgICAgICAgICAgdG9hc3RDbGFzczogJ3RvYXN0J1xyXG4gICAgICAgIH0pO1xyXG4gICAgfV0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy9jZW5zb3ItZWRpdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjZW5zb3IgZWRpdCBpbml0Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuaWQgPSAkY3RybC5yZXNvbHZlLmlkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5pZCkge1xyXG4gICAgICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvY2Vuc29yLycgKyAkY3RybC5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvciA9IHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZlIGNlbnNvcicsICRjdHJsLmNlbnNvcik7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvY2Vuc29yJywgJGN0cmwuY2Vuc29yKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5jZW5zb3IsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKCRjdHJsLmNlbnNvcik7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ2NlbnNvckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY2Vuc29ycy9jZW5zb3ItZWRpdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiLCIvL2NlbnNvci1saXN0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwLCAkbW9kYWwsIHRvYXN0cikge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHBhZ2VTaXplRGVmYXVsdCA9IDEwO1xyXG4gICAgICAgIHZhciB0YWJsZVN0YXRlUmVmO1xyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2hNb2RlbCA9IHtcclxuICAgICAgICAgICAgcGFnZTogMSxcclxuICAgICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplRGVmYXVsdFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjZW5zb3IgbGlzdCBpbml0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2NlbnNvckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMudW5zaGlmdChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1NhdmVkIENlbnNvcicpOyBcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdjZW5zb3JFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGMuaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGMsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnVXBkYXRlZCBDZW5zb3InKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmRlbGV0ZSA9IGZ1bmN0aW9uIChjKSB7XHJcbiAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnYXBpL2NlbnNvci8nICsgYy5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLmNlbnNvcnMuaW5kZXhPZihjKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygnRGVsZXRlZCBjZW5zb3InKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2ggPSBmdW5jdGlvbiAodGFibGVTdGF0ZSkge1xyXG4gICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gdHJ1ZTsgXHJcbiAgICAgICAgICAgIHRhYmxlU3RhdGVSZWYgPSB0YWJsZVN0YXRlO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mICh0YWJsZVN0YXRlLnNvcnQucHJlZGljYXRlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwub3JkZXJCeSA9IHRhYmxlU3RhdGUuc29ydC5wcmVkaWNhdGU7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbC5vcmRlckRpcmVjdGlvbiA9IHRhYmxlU3RhdGUuc29ydC5yZXZlcnNlID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvY2Vuc29yJywgeyBwYXJhbXM6ICRjdHJsLnNlYXJjaE1vZGVsIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMgPSByLmRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICRjdHJsLnNlYXJjaE1vZGVsLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gZmFsc2U7IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnBhZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5zZWFyY2godGFibGVTdGF0ZVJlZik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ2NlbnNvckxpc3QnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvY2Vuc29ycy9jZW5zb3ItbGlzdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCAnJHVpYk1vZGFsJywgJ3RvYXN0cicsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vY29uZmlndXJhdGlvbi1zZXR0aW5nLmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwLCB0b2FzdHIpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG4gICAgICAgIHZhciBodWIgPSAkLmNvbm5lY3Rpb24ubmFtZU5vdGlmaWNhdGlvbkh1YjtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbmZpZ3VyYXRpb24gc2V0dGluZyBpbml0Jyk7XHJcbiAgICAgICAgICAgICQuY29ubmVjdGlvbi5odWIuc3RhcnQoKS5kb25lKGZ1bmN0aW9uKCl7IGNvbnNvbGUubG9nKCdodWIgY29ubmVjdGlvbiBzdGFydGVkJyk7IH0pO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9jb25maWd1cmF0aW9uJykudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY29uZmlndXJhdGlvbiA9IHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdMb2FkZWQgY29uZmlndXJhdGlvbicpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuZGlzbWlzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2F2ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJ2FwaS9jb25maWd1cmF0aW9uJywgJGN0cmwuY29uZmlndXJhdGlvbikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwuY29uZmlndXJhdGlvbiwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci5zdWNjZXNzKCdDb25maWd1cmF0aW9uIFNhdmVkJyk7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLmVycm9yKCdFcnJvciBTYXZpbmcgQ29uZmlndXJhdGlvbicpO1xyXG4gICAgICAgICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGh1Yi5zZXJ2ZXIuY29uZmlndXJhdGlvbkNoYW5nZSgkY3RybC5jb25maWd1cmF0aW9uKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NvbmZpZ3VyYXRpb24gc2VudCB0byBodWInKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdjb25maWd1cmF0aW9uU2V0dGluZycsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jb25maWd1cmF0aW9uL2NvbmZpZ3VyYXRpb24tc2V0dGluZy5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCAndG9hc3RyJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy9kYXNoYm9hcmQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnZGFzaGJvYXJkIGluaXQnKTtcclxuICAgICAgICAgICAgJGN0cmwucmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwucmVmcmVzaCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3Zpc2l0b3Ivc3VtbWFyeScpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnN1bW1hcnkgPSByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyKTtcclxuICAgICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnZGFzaGJvYXJkJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vZGlyZWN0aXZlcy5tb2R1bGVzLmpzXHJcbihmdW5jdGlvbigpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycsIFtdKTsgXHJcbn0pKCk7IiwiLy9zdFRhYmxlLmRpcmVjdGl2ZS5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcclxuXHJcbiAgICBtb2R1bGUuZGlyZWN0aXZlKCdzdFN1Ym1pdFNlYXJjaCcsIFsnc3RDb25maWcnLCAnJHRpbWVvdXQnLCAnJHBhcnNlJywgZnVuY3Rpb24gKHN0Q29uZmlnLCAkdGltZW91dCwgJHBhcnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ15zdFRhYmxlJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5iaW5kKCdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVDdHJsID0gY3RybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVDdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfV0pO1xyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJjbGVhcktleVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMsIGN0cmwpIHtcclxuICAgICAgICAgICAgICAgIGVsLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoICE9PSAyNykgeyByZXR1cm47IH0gLy8gY2hlY2sga2V5IGhvdyB5b3Ugd2FudFxyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuJHNldFZpZXdWYWx1ZShudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICBjdHJsLiRyZW5kZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kYXBwbHkoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBtb2R1bGUuZGlyZWN0aXZlKFwic3RSZXNldFNlYXJjaFwiLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmU6IFsnXnN0VGFibGUnLCAnXm5nTW9kZWwnXSxcclxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5iaW5kKCdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1vZGVsID0gY3RybHNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN0cmwgPSBjdHJsc1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZm9yRWFjaChtb2RlbC4kdmlld1ZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHZhbHVlLCBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5LnRvTG93ZXJDYXNlKCkgPT09ICdwYWdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbC4kdmlld1ZhbHVlW2tleV0gPSAxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHwgXy5pbmNsdWRlcyhrZXkudG9Mb3dlckNhc2UoKSwgJ3BhZ2UnKSkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLiR2aWV3VmFsdWVba2V5XSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRhYmxlU3RhdGUgPSBjdHJsLnRhYmxlU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5zZWFyY2gucHJlZGljYXRlT2JqZWN0ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlU3RhdGUucGFnaW5hdGlvbi5zdGFydCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJzdENsZWFyS2V5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogWydec3RUYWJsZScsICdebmdNb2RlbCddLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHJzLCBjdHJscykge1xyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5vbigna2V5ZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZ01vZGVsID0gY3RybHNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN0cmwgPSBjdHJsc1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMjcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmNvbnRleHQuYXR0cmlidXRlc1snc3Qtc2VhcmNoJ10gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpZWxkTmFtZSA9IGVsZW1lbnQuY29udGV4dC5hdHRyaWJ1dGVzWydzdC1zZWFyY2gnXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTdGF0ZSA9IGN0cmwudGFibGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlU3RhdGUuc2VhcmNoLnByZWRpY2F0ZU9iamVjdFtmaWVsZE5hbWVdID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5nTW9kZWwuJHJlbmRlcigpOyAvLyB3aWxsIHVwZGF0ZSB0aGUgaW5wdXQgdmFsdWUgYXMgd2VsbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL2ZpbHRlcnMuanNcclxuKGZ1bmN0aW9uKCkge1xyXG4gICAgYW5ndWxhci5tb2R1bGUoJ2FwcCcpLmZpbHRlcigncGVyY2VudGFnZScsIFsnJGZpbHRlcicsIGZ1bmN0aW9uICgkZmlsdGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChpbnB1dCwgZGVjaW1hbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRmaWx0ZXIoJ251bWJlcicpKGlucHV0ICogMTAwLCBkZWNpbWFscykgKyAnJSc7XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuICAgIH1cclxuKSgpOyIsIi8vdXNlci1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXIgZWRpdCBpbml0Jyk7XHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC51c2VyID0gJGN0cmwucmVzb2x2ZS51c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3VzZXIvcm9sZXMnKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5yb2xlcyA9IHIuZGF0YTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLmRpc21pc3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnNhdmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghJGN0cmwudXNlci5lbWFpbCkgJGN0cmwudXNlci5lbWFpbCA9ICRjdHJsLnVzZXIudXNlck5hbWUgKyAnQHNwbGNlbnRlci5vcmcnO1xyXG5cclxuICAgICAgICAgICAgdmFyIHJvbGVzID0gW107XHJcbiAgICAgICAgICAgIF8uZm9yRWFjaCgkY3RybC51c2VyLnJvbGVzLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJvbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlcy5wdXNoKHJvbGUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHJvbGVzLmxlbmd0aCA9PT0gMCkgcm9sZXMucHVzaCgndXNlcicpO1xyXG4gICAgICAgICAgICAkY3RybC51c2VyLnJvbGVzID0gcm9sZXM7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL3VzZXIvdXBkYXRlJywgJGN0cmwudXNlcikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwudXNlciwgci5kYXRhKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLm1vZGFsSW5zdGFuY2UuY2xvc2UoJGN0cmwudXNlcik7XHJcbiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3NvbWV0aGluZyB3ZW50IHdyb25nJywgZXJyLm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ3VzZXJFZGl0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtOiAnPCcsXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiAnPCcsXHJcbiAgICAgICAgICAgICAgICBjbG9zZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgZGlzbWlzczogJyYnLFxyXG4gICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogJzwnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL3VzZXJzL3VzZXItZWRpdC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IFsnJGh0dHAnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy91c2VyLWxpc3QuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHAsICRtb2RhbCwgdG9hc3RyKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwudGl0bGUgPSAnVXNlcnMnO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS91c2VyJykudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudXNlcnMgPSByLmRhdGE7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY3JlYXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvL1RPRE86IHJldHVybiByb2xlcyBkaXNwbGF5IGJyb2tlblxyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd1c2VyRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczogeyBtb2RhbEluc3RhbmNlOiBcIjxcIiB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlciA9IHJlc3VsdDsgXHJcbiAgICAgICAgICAgICAgICB2YXIgcm9sZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIF8uZm9yRWFjaChyZXN1bHQucm9sZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHJvbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JvbGUnLCByb2xlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZXMucHVzaChyb2xlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHVzZXIucm9sZXMgPSBbXTsgXHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygncmVzdWx0JywgdXNlcik7XHJcbiAgICAgICAgICAgICAgICB1c2VyLnJvbGVzID0gW10gPSByb2xlcztcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyb2xlcycsIHJvbGVzKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZXN1bHQnLCB1c2VyKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLnVzZXJzLnVuc2hpZnQodXNlcik7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnQ3JlYXRlZCBVc2VyJyk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAndXNlckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHsgbW9kYWxJbnN0YW5jZTogXCI8XCIgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHsgdXNlcjogYW5ndWxhci5jb3B5KGl0ZW0pIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKGl0ZW0sIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnVXBkYXRlZCBVc2VyJyk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVhc29uKSB7IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvdXNlci8nICsgYy5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLnVzZXJzLmluZGV4T2YoYyk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC51c2Vycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgICAgIHRvYXN0ci53YXJuaW5nKCdEZWxldGVkIFVzZXInKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd1c2VyTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC91c2Vycy91c2VyLWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsICd0b2FzdHInLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy92aXNpdG9yLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndmlzaXRvciBlZGl0IGluaXQnKTtcclxuXHJcbiAgICAgICAgICAgICRjdHJsLnRpdGxlID0gJ05ldyBWaXNpdG9yJztcclxuXHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9ICRjdHJsLnJlc29sdmUuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRjdHJsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS92aXNpdG9yLycgKyAkY3RybC5pZCkudGhlbihmdW5jdGlvbihyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGN0cmwudmlzaXRvciA9IHIuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC50aXRsZSA9ICgkY3RybC52aXNpdG9yLmZpcnN0bmFtZSArICcgJyArICRjdHJsLnZpc2l0b3IubGFzdG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IFxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSB2aXNpdG9yJywgJGN0cmwudmlzaXRvcik7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvdmlzaXRvcicsICRjdHJsLnZpc2l0b3IpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLnZpc2l0b3IsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKCRjdHJsLnZpc2l0b3IpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndmlzaXRvckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlzaXRvcnMvdmlzaXRvci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vdmlzaXRvci1saXN0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwLCAkbW9kYWwsIHRvYXN0cikge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7IFxyXG4gICAgICAgIHZhciBwYWdlU2l6ZURlZmF1bHQgPSAxMDtcclxuICAgICAgICB2YXIgdGFibGVTdGF0ZVJlZjtcclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwgPSB7XHJcbiAgICAgICAgICAgIHBhZ2U6IDEsXHJcbiAgICAgICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZURlZmF1bHRcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdpbml0IHZpc2l0b3IgbGlzdCcpO1xyXG4gICAgICAgICAgICAkY3RybC50aXRsZSA9ICdWaXNpdG9ycyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Zpc2l0b3JFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9ycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIuc3VjY2VzcygnQ3JlYXRlZCBWaXNpdG9yJyk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAkbW9kYWwub3Blbih7XHJcbiAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICd2aXNpdG9yRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiB2LmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh2LCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdG9hc3RyLnN1Y2Nlc3MoJ1VwZGF0ZWQgVmlzaXRvcicpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24odikge1xyXG4gICAgICAgICAgICAkaHR0cC5kZWxldGUoJ2FwaS92aXNpdG9yLycgKyB2LmlkKS50aGVuKGZ1bmN0aW9uKHIpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpZHggPSAkY3RybC52aXNpdG9ycy5pbmRleE9mKHYpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudmlzaXRvcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICB0b2FzdHIud2FybmluZygnRGVsZXRlZCBWaXNpdG9yJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuc2VhcmNoID0gZnVuY3Rpb24gKHRhYmxlU3RhdGUpIHtcclxuICAgICAgICAgICAgJGN0cmwubG9hZGluZyA9IHRydWU7IFxyXG4gICAgICAgICAgICB0YWJsZVN0YXRlUmVmID0gdGFibGVTdGF0ZTtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwuZnV6enlNYXRjaFJhbmdlID0gJGN0cmwuZnV6enlNYXRjaFJhbmdlOyBcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwuZGF5c09sZCA9ICRjdHJsLmRheXM7XHJcblxyXG4gICAgICAgICAgICBpZiAodHlwZW9mICh0YWJsZVN0YXRlLnNvcnQucHJlZGljYXRlKSAhPT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwub3JkZXJCeSA9IHRhYmxlU3RhdGUuc29ydC5wcmVkaWNhdGU7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5zZWFyY2hNb2RlbC5vcmRlckRpcmVjdGlvbiA9IHRhYmxlU3RhdGUuc29ydC5yZXZlcnNlID8gJ2Rlc2MnIDogJ2FzYyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3Zpc2l0b3InLCB7IHBhcmFtczogJGN0cmwuc2VhcmNoTW9kZWwgfSkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudmlzaXRvcnMgPSByLmRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICRjdHJsLnNlYXJjaE1vZGVsLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5sb2FkaW5nID0gZmFsc2U7IFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLnBhZ2VkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5zZWFyY2godGFibGVTdGF0ZVJlZik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCd2aXNpdG9yTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC92aXNpdG9ycy92aXNpdG9yLWxpc3QuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgJyR1aWJNb2RhbCcsICd0b2FzdHInLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiXX0=
