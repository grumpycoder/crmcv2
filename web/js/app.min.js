!function(){angular.module("app",["app.directives","ui.bootstrap","ui.slider","smart-table"])}();
!function(){function n(n){var e=this;e.$onInit=function(){console.log("censor edit init"),e.resolve&&(e.id=e.resolve.id),e.id&&n.get("api/censor/"+e.id).then(function(n){e.censor=n.data}).catch(function(n){console.log("err",n.message)})},e.cancel=function(){e.dismiss()},e.save=function(){return console.log("save censor",e.censor),n.post("api/censor",e.censor).then(function(n){angular.extend(e.censor,n.data),e.modalInstance.close(e.censor)}).catch(function(n){console.error("something went wrong",n.message)})}}var e=angular.module("app");e.component("censorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/censors/censor-edit.component.html",controller:["$http",n]})}();
!function(){function n(n,e){var o,t=this,s=10;t.searchModel={page:1,pageSize:s},t.$onInit=function(){console.log("censor list init")},t.create=function(){e.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(n){t.censors.unshift(n)},function(n){})},t.edit=function(n){e.open({component:"censorEdit",bindings:{modalInstance:"<"},resolve:{id:n.id},size:"md"}).result.then(function(e){angular.extend(n,e)},function(n){})},t.delete=function(e){n.delete("api/censor/"+e.id).then(function(n){var o=t.censors.indexOf(e);t.censors.splice(o,1)})},t.search=function(e){o=e,n.get("api/censor",{params:t.searchModel}).then(function(n){t.censors=n.data.results,t.searchModel=n.data,delete t.searchModel.results})},t.paged=function(){t.search(o)}}var e=angular.module("app");e.component("censorList",{templateUrl:"app/censors/censor-list.component.html",controller:["$http","$uibModal",n]})}();
!function(){function n(n){var o=this;o.$onInit=function(){console.log("configuration setting init"),n.get("api/configuration").then(function(n){o.configuration=n.data,console.log("configuration",o.configuration)})},o.cancel=function(){o.dismiss()},o.save=function(){return console.log("save configuration",o.configuration),n.post("api/configuration",o.configuration).then(function(n){angular.extend(o.configuration,n.data),console.log("return",n)}).catch(function(n){console.error("something went wrong",n.message)})}}var o=angular.module("app");o.component("configurationSetting",{templateUrl:"app/configuration/configuration-setting.component.html",controller:["$http",n]})}();
!function(){angular.module("app.directives",[])}();
!function(){var e=angular.module("app.directives");e.directive("stSubmitSearch",["stConfig","$timeout","$parse",function(e,t,r){return{require:"^stTable",link:function(e,t,r,n){return t.bind("click",function(){console.log("search");var e=n;e.pipe()})}}}]),e.directive("clearKey",function(){return{restrict:"EA",require:"ngModel",link:function(e,t,r,n){t.on("keydown",function(t){27===t.which&&(n.$setViewValue(null),n.$render(),e.$apply())})}}}),e.directive("stResetSearch",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){return t.bind("click",function(){var t=n[1],r=n[0];return e.$apply(function(){angular.forEach(t.$viewValue,function(e,r){"page"===r.toLowerCase()&&(t.$viewValue[r]=1),Array.isArray(e)||_.includes(r.toLowerCase(),"page")||(t.$viewValue[r]=null)});var e=r.tableState();return e.search.predicateObject={},e.pagination.start=0,r.pipe()})})}}}),e.directive("stClearKey",function(){return{restrict:"EA",require:["^stTable","^ngModel"],link:function(e,t,r,n){t.on("keydown",function(r){var i=n[1],a=n[0];return 13===r.which?a.pipe():27===r.which?void 0!==t.context.attributes["st-search"]?e.$apply(function(){var e=t.context.attributes["st-search"].value,r=a.tableState();return r.search.predicateObject[e]="",a.pipe()}):e.$apply(function(){i.$setViewValue(null),i.$render()}):void 0})}}})}();
!function(){function e(e){var n=this;n.$onInit=function(){console.log("user edit init",n),n.resolve&&(n.user=n.resolve.user)},n.cancel=function(){n.dismiss()},n.save=function(){return console.log("save user",n.user),e.post("api/user/update",n.user).then(function(e){angular.extend(n.user,e.data),n.modalInstance.close(n.user)}).catch(function(e){console.error("something went wrong",e.message)})}}var n=angular.module("app");n.component("userEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/users/user-edit.component.html",controller:["$http",e]})}();
!function(){function n(n,e){var t=this;t.$onInit=function(){console.log("user list init"),n.get("api/user").then(function(n){t.users=n.data,console.log("users",t.users)})},t.create=function(){e.open({component:"userEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(n){t.users.unshift(n)},function(n){})},t.edit=function(n){console.log("user",n),e.open({component:"userEdit",bindings:{modalInstance:"<"},resolve:{user:n},size:"md"}).result.then(function(e){angular.extend(n,e)},function(n){})},t.delete=function(e){n.delete("api/user/"+e.id).then(function(n){var o=t.censors.indexOf(e);t.censors.splice(o,1)})}}var e=angular.module("app");e.component("userList",{templateUrl:"app/users/user-list.component.html",controller:["$http","$uibModal",n]})}();
!function(){function i(i){var o=this;o.$onInit=function(){console.log("visitor edit init"),o.resolve&&(o.id=o.resolve.id),o.id&&i.get("api/visitor/"+o.id).then(function(i){o.visitor=i.data}).catch(function(i){console.log("err",i.message)})},o.cancel=function(){o.dismiss()},o.save=function(){return console.log("save visitor",o.visitor),i.post("api/visitor",o.visitor).then(function(i){angular.extend(o.visitor,i.data),o.modalInstance.close(o.visitor)}).catch(function(i){console.error("something went wrong",i.message)})}}var o=angular.module("app");o.component("visitorEdit",{bindings:{item:"<",resolve:"<",close:"&",dismiss:"&",modalInstance:"<"},templateUrl:"app/visitors/visitor-edit.component.html",controller:["$http",i]})}();
!function(){function i(i,t){var n,e=this,o=10;e.searchModel={page:1,pageSize:o},e.$onInit=function(){console.log("init visitor list")},e.create=function(){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{},size:"md"}).result.then(function(i){e.visitors.unshift(i)},function(i){})},e.edit=function(i){t.open({component:"visitorEdit",bindings:{modalInstance:"<"},resolve:{id:i.id},size:"md"}).result.then(function(t){angular.extend(i,t)},function(i){})},e.delete=function(t){i.delete("api/visitor/"+t.id).then(function(i){var n=e.visitors.indexOf(t);e.visitors.splice(n,1)})},e.search=function(t){n=t,i.get("api/visitor",{params:e.searchModel}).then(function(i){e.visitors=i.data.results,e.searchModel=i.data,delete e.searchModel.results})},e.paged=function(){e.search(n)}}var t=angular.module("app");t.component("visitorList",{templateUrl:"app/visitors/visitor-list.component.html",controller:["$http","$uibModal",i]})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5tb2R1bGUuanMiLCJjZW5zb3JzL2NlbnNvci1lZGl0LmNvbXBvbmVudC5qcyIsImNlbnNvcnMvY2Vuc29yLWxpc3QuY29tcG9uZW50LmpzIiwiY29uZmlndXJhdGlvbi9jb25maWd1cmF0aW9uLXNldHRpbmcuY29tcG9uZW50LmpzIiwiZGlyZWN0aXZlcy9kaXJlY3RpdmVzLm1vZHVsZXMuanMiLCJkaXJlY3RpdmVzL3N0VGFibGUuZGlyZWN0aXZlLmpzIiwidXNlcnMvdXNlci1lZGl0LmNvbXBvbmVudC5qcyIsInVzZXJzL3VzZXItbGlzdC5jb21wb25lbnQuanMiLCJ2aXNpdG9ycy92aXNpdG9yLWVkaXQuY29tcG9uZW50LmpzIiwidmlzaXRvcnMvdmlzaXRvci1saXN0LmNvbXBvbmVudC5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29udHJvbGxlciIsIiRodHRwIiwiJGN0cmwiLCJ0aGlzIiwiJG9uSW5pdCIsImNvbnNvbGUiLCJsb2ciLCJyZXNvbHZlIiwiaWQiLCJnZXQiLCJ0aGVuIiwiciIsImNlbnNvciIsImRhdGEiLCJjYXRjaCIsImVyciIsIm1lc3NhZ2UiLCJjYW5jZWwiLCJkaXNtaXNzIiwic2F2ZSIsInBvc3QiLCJleHRlbmQiLCJtb2RhbEluc3RhbmNlIiwiY2xvc2UiLCJlcnJvciIsImNvbXBvbmVudCIsImJpbmRpbmdzIiwiaXRlbSIsInRlbXBsYXRlVXJsIiwiJG1vZGFsIiwidGFibGVTdGF0ZVJlZiIsInBhZ2VTaXplRGVmYXVsdCIsInNlYXJjaE1vZGVsIiwicGFnZSIsInBhZ2VTaXplIiwiY3JlYXRlIiwib3BlbiIsInNpemUiLCJyZXN1bHQiLCJjZW5zb3JzIiwidW5zaGlmdCIsInJlYXNvbiIsImVkaXQiLCJjIiwiZGVsZXRlIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsInNlYXJjaCIsInRhYmxlU3RhdGUiLCJwYXJhbXMiLCJyZXN1bHRzIiwicGFnZWQiLCJjb25maWd1cmF0aW9uIiwiZGlyZWN0aXZlIiwic3RDb25maWciLCIkdGltZW91dCIsIiRwYXJzZSIsInJlcXVpcmUiLCJsaW5rIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0ciIsImN0cmwiLCJiaW5kIiwidGFibGVDdHJsIiwicGlwZSIsInJlc3RyaWN0IiwiZWwiLCJhdHRycyIsIm9uIiwiZXZlbnQiLCJ3aGljaCIsIiRzZXRWaWV3VmFsdWUiLCIkcmVuZGVyIiwiJGFwcGx5IiwiY3RybHMiLCJtb2RlbCIsImZvckVhY2giLCIkdmlld1ZhbHVlIiwidmFsdWUiLCJrZXkiLCJ0b0xvd2VyQ2FzZSIsIkFycmF5IiwiaXNBcnJheSIsIl8iLCJpbmNsdWRlcyIsInByZWRpY2F0ZU9iamVjdCIsInBhZ2luYXRpb24iLCJzdGFydCIsIm5nTW9kZWwiLCJ1bmRlZmluZWQiLCJjb250ZXh0IiwiYXR0cmlidXRlcyIsImZpZWxkTmFtZSIsInVzZXIiLCJ1c2VycyIsInUiLCJ2aXNpdG9yIiwidmlzaXRvcnMiLCJ2Il0sIm1hcHBpbmdzIjoiQ0FDQSxXQUNpQkEsUUFBUUMsT0FBTyxPQUFRLGlCQUFrQixlQUFnQixZQUFhO0NDRHZGLFdBR0ksUUFBU0MsR0FBV0MsR0FDaEIsR0FBSUMsR0FBUUMsSUFFWkQsR0FBTUUsUUFBVSxXQUNaQyxRQUFRQyxJQUFJLG9CQUVSSixFQUFNSyxVQUNOTCxFQUFNTSxHQUFLTixFQUFNSyxRQUFRQyxJQUV6Qk4sRUFBTU0sSUFDTlAsRUFBTVEsSUFBSSxjQUFnQlAsRUFBTU0sSUFBSUUsS0FBSyxTQUFVQyxHQUMvQ1QsRUFBTVUsT0FBU0QsRUFBRUUsT0FDbEJDLE1BQU0sU0FBVUMsR0FDZlYsUUFBUUMsSUFBSSxNQUFPUyxFQUFJQyxZQU1uQ2QsRUFBTWUsT0FBUyxXQUNYZixFQUFNZ0IsV0FHVmhCLEVBQU1pQixLQUFPLFdBRVQsTUFEQWQsU0FBUUMsSUFBSSxjQUFlSixFQUFNVSxRQUMxQlgsRUFBTW1CLEtBQUssYUFBY2xCLEVBQU1VLFFBQVFGLEtBQUssU0FBVUMsR0FDekRiLFFBQVF1QixPQUFPbkIsRUFBTVUs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QyxPQUFTLFNBQVN3RCxHQUNwQm5HLEVBQU0yQyxPQUFPLGVBQWlCd0QsRUFBRTVGLElBQUlFLEtBQUssU0FBU0MsR0FDOUMsR0FBSWtDLEdBQU0zQyxFQUFNaUcsU0FBU3JELFFBQVFzRCxFQUNqQ2xHLEdBQU1pRyxTQUFTcEQsT0FBT0YsRUFBSyxNQUluQzNDLEVBQU04QyxPQUFTLFNBQVVDLEdBQ3JCbkIsRUFBZ0JtQixFQUNoQmhELEVBQU1RLElBQUksZUFBaUJ5QyxPQUFRaEQsRUFBTThCLGNBQWV0QixLQUFLLFNBQVVDLEdBQ25FVCxFQUFNaUcsU0FBV3hGLEVBQUVFLEtBQUtzQyxRQUN4QmpELEVBQU04QixZQUFjckIsRUFBRUUsV0FDZlgsR0FBTThCLFlBQVltQixXQUlqQ2pELEVBQU1rRCxNQUFRLFdBQ1ZsRCxFQUFNOEMsT0FBT2xCLElBaEVyQixHQUFJL0IsR0FBU0QsUUFBUUMsT0FBTyxNQXFFNUJBLEdBQU8wQixVQUFVLGVBRVRHLFlBQWEsMkNBQ2I1QixZQUFhLFFBQVMsWUFBYUEiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vYXBwLm1vZHVsZS5qc1xyXG4oZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFsnYXBwLmRpcmVjdGl2ZXMnLCAndWkuYm9vdHN0cmFwJywgJ3VpLnNsaWRlcicsICdzbWFydC10YWJsZSddKTtcclxuICAgIH1cclxuKSgpOyIsIi8vY2Vuc29yLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2Vuc29yIGVkaXQgaW5pdCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRjdHJsLnJlc29sdmUpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmlkID0gJGN0cmwucmVzb2x2ZS5pZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoJGN0cmwuaWQpIHtcclxuICAgICAgICAgICAgICAgICRodHRwLmdldCgnYXBpL2NlbnNvci8nICsgJGN0cmwuaWQpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICAgICAkY3RybC5jZW5zb3IgPSByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSBjZW5zb3InLCAkY3RybC5jZW5zb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL2NlbnNvcicsICRjdHJsLmNlbnNvcikudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQoJGN0cmwuY2Vuc29yLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC5jZW5zb3IpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBtb2R1bGUuY29tcG9uZW50KCdjZW5zb3JFZGl0JyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtOiAnPCcsXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiAnPCcsXHJcbiAgICAgICAgICAgICAgICBjbG9zZTogJyYnLFxyXG4gICAgICAgICAgICAgICAgZGlzbWlzczogJyYnLFxyXG4gICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogJzwnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NlbnNvcnMvY2Vuc29yLWVkaXQuY29tcG9uZW50Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRodHRwJywgY29udHJvbGxlcl1cclxuICAgICAgICB9KTtcclxufVxyXG4pKCk7IiwiLy9jZW5zb3ItbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCwgJG1vZGFsKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuICAgICAgICB2YXIgcGFnZVNpemVEZWZhdWx0ID0gMTA7XHJcbiAgICAgICAgdmFyIHRhYmxlU3RhdGVSZWY7XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0ge1xyXG4gICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVEZWZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NlbnNvciBsaXN0IGluaXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnY2Vuc29yRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNpemU6ICdtZCdcclxuICAgICAgICAgICAgfSkucmVzdWx0LnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29ycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAnY2Vuc29yRWRpdCcsXHJcbiAgICAgICAgICAgICAgICBiaW5kaW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsSW5zdGFuY2U6IFwiPFwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBjLmlkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvY2Vuc29yLycgKyBjLmlkKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWR4ID0gJGN0cmwuY2Vuc29ycy5pbmRleE9mKGMpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY2Vuc29ycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2ggPSBmdW5jdGlvbiAodGFibGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0YWJsZVN0YXRlUmVmID0gdGFibGVTdGF0ZTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvY2Vuc29yJywgeyBwYXJhbXM6ICRjdHJsLnNlYXJjaE1vZGVsIH0pLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMgPSByLmRhdGEucmVzdWx0cztcclxuICAgICAgICAgICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0gci5kYXRhO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlICRjdHJsLnNlYXJjaE1vZGVsLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwucGFnZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRjdHJsLnNlYXJjaCh0YWJsZVN0YXRlUmVmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgnY2Vuc29yTGlzdCcsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9jZW5zb3JzL2NlbnNvci1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiLCIvL2NvbmZpZ3VyYXRpb24tc2V0dGluZy5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCkge1xyXG4gICAgICAgIHZhciAkY3RybCA9IHRoaXM7XHJcblxyXG4gICAgICAgICRjdHJsLiRvbkluaXQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25maWd1cmF0aW9uIHNldHRpbmcgaW5pdCcpO1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS9jb25maWd1cmF0aW9uJykudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuY29uZmlndXJhdGlvbiA9IHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjb25maWd1cmF0aW9uJywgJGN0cmwuY29uZmlndXJhdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSBjb25maWd1cmF0aW9uJywgJGN0cmwuY29uZmlndXJhdGlvbik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnYXBpL2NvbmZpZ3VyYXRpb24nLCAkY3RybC5jb25maWd1cmF0aW9uKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC5jb25maWd1cmF0aW9uLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JldHVybicsIHIpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIG1vZHVsZS5jb21wb25lbnQoJ2NvbmZpZ3VyYXRpb25TZXR0aW5nJyxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2NvbmZpZ3VyYXRpb24vY29uZmlndXJhdGlvbi1zZXR0aW5nLmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vZGlyZWN0aXZlcy5tb2R1bGVzLmpzXHJcbihmdW5jdGlvbigpIHtcclxuICAgIGFuZ3VsYXIubW9kdWxlKCdhcHAuZGlyZWN0aXZlcycsIFtdKTsgXHJcbn0pKCk7IiwiLy9zdFRhYmxlLmRpcmVjdGl2ZS5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwLmRpcmVjdGl2ZXMnKTtcclxuXHJcbiAgICBtb2R1bGUuZGlyZWN0aXZlKCdzdFN1Ym1pdFNlYXJjaCcsIFsnc3RDb25maWcnLCAnJHRpbWVvdXQnLCAnJHBhcnNlJywgZnVuY3Rpb24gKHN0Q29uZmlnLCAkdGltZW91dCwgJHBhcnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWlyZTogJ15zdFRhYmxlJyxcclxuICAgICAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyLCBjdHJsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudC5iaW5kKCdjbGljaycsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VhcmNoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZUN0cmwgPSBjdHJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YWJsZUN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcImNsZWFyS2V5XCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuICAgICAgICAgICAgcmVxdWlyZTogJ25nTW9kZWwnLFxyXG4gICAgICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycywgY3RybCkge1xyXG4gICAgICAgICAgICAgICAgZWwub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggIT09IDI3KSB7IHJldHVybjsgfSAvLyBjaGVjayBrZXkgaG93IHlvdSB3YW50XHJcbiAgICAgICAgICAgICAgICAgICAgY3RybC4kc2V0Vmlld1ZhbHVlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGN0cmwuJHJlbmRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIG1vZHVsZS5kaXJlY3RpdmUoXCJzdFJlc2V0U2VhcmNoXCIsXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdHJpY3Q6ICdFQScsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogWydec3RUYWJsZScsICdebmdNb2RlbCddLFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmJpbmQoJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKG1vZGVsLiR2aWV3VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3BhZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVsLiR2aWV3VmFsdWVba2V5XSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSB8fCBfLmluY2x1ZGVzKGtleS50b0xvd2VyQ2FzZSgpLCAncGFnZScpKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWwuJHZpZXdWYWx1ZVtrZXldID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGFibGVTdGF0ZSA9IGN0cmwudGFibGVTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZVN0YXRlLnNlYXJjaC5wcmVkaWNhdGVPYmplY3QgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5wYWdpbmF0aW9uLnN0YXJ0ID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGN0cmwucGlwZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgbW9kdWxlLmRpcmVjdGl2ZShcInN0Q2xlYXJLZXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRUEnLFxyXG4gICAgICAgICAgICByZXF1aXJlOiBbJ15zdFRhYmxlJywgJ15uZ01vZGVsJ10sXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGN0cmxzKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Lm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5nTW9kZWwgPSBjdHJsc1sxXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3RybCA9IGN0cmxzWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQud2hpY2ggPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHJsLnBpcGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSAyNykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuY29udGV4dC5hdHRyaWJ1dGVzWydzdC1zZWFyY2gnXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmllbGROYW1lID0gZWxlbWVudC5jb250ZXh0LmF0dHJpYnV0ZXNbJ3N0LXNlYXJjaCddLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0YWJsZVN0YXRlID0gY3RybC50YWJsZVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVTdGF0ZS5zZWFyY2gucHJlZGljYXRlT2JqZWN0W2ZpZWxkTmFtZV0gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3RybC5waXBlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2NvcGUuJGFwcGx5KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZ01vZGVsLiRzZXRWaWV3VmFsdWUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmdNb2RlbC4kcmVuZGVyKCk7IC8vIHdpbGwgdXBkYXRlIHRoZSBpbnB1dCB2YWx1ZSBhcyB3ZWxsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxuXHJcbn1cclxuKSgpOyIsIi8vdXNlci1lZGl0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXIgZWRpdCBpbml0JywgJGN0cmwpO1xyXG4gICAgICAgICAgICBpZiAoJGN0cmwucmVzb2x2ZSkge1xyXG4gICAgICAgICAgICAgICAgJGN0cmwudXNlciA9ICRjdHJsLnJlc29sdmUudXNlcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSB1c2VyJywgJGN0cmwudXNlcik7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvdXNlci91cGRhdGUnLCAkY3RybC51c2VyKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCgkY3RybC51c2VyLCByLmRhdGEpO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwubW9kYWxJbnN0YW5jZS5jbG9zZSgkY3RybC51c2VyKTtcclxuICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignc29tZXRoaW5nIHdlbnQgd3JvbmcnLCBlcnIubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndXNlckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdXNlcnMvdXNlci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcblxyXG59XHJcbikoKTsiLCIvL3VzZXItbGlzdC5jb21wb25lbnQuanNcclxuKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBtb2R1bGUgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyk7XHJcblxyXG4gICAgZnVuY3Rpb24gY29udHJvbGxlcigkaHR0cCwgJG1vZGFsKSB7XHJcbiAgICAgICAgdmFyICRjdHJsID0gdGhpcztcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXIgbGlzdCBpbml0Jyk7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnYXBpL3VzZXInKS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC51c2VycyA9IHIuZGF0YTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd1c2VycycsICRjdHJsLnVzZXJzKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5jcmVhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3VzZXJFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC51c2Vycy51bnNoaWZ0KHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5lZGl0ID0gZnVuY3Rpb24gKHUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXInLCB1KTtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAndXNlckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyOiB1XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2l6ZTogJ21kJ1xyXG4gICAgICAgICAgICB9KS5yZXN1bHQudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZCh1LCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuZGVsZXRlID0gZnVuY3Rpb24gKGMpIHtcclxuICAgICAgICAgICAgJGh0dHAuZGVsZXRlKCdhcGkvdXNlci8nICsgYy5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLmNlbnNvcnMuaW5kZXhPZihjKTtcclxuICAgICAgICAgICAgICAgICRjdHJsLmNlbnNvcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndXNlckxpc3QnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdXNlcnMvdXNlci1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG5cclxufVxyXG4pKCk7IiwiLy92aXNpdG9yLWVkaXQuY29tcG9uZW50LmpzXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbW9kdWxlID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbnRyb2xsZXIoJGh0dHApIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzO1xyXG5cclxuICAgICAgICAkY3RybC4kb25Jbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndmlzaXRvciBlZGl0IGluaXQnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY3RybC5yZXNvbHZlKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5pZCA9ICRjdHJsLnJlc29sdmUuaWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCRjdHJsLmlkKSB7XHJcbiAgICAgICAgICAgICAgICAkaHR0cC5nZXQoJ2FwaS92aXNpdG9yLycgKyAkY3RybC5pZCkudGhlbihmdW5jdGlvbiAocikge1xyXG4gICAgICAgICAgICAgICAgICAgICRjdHJsLnZpc2l0b3IgPSByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VycicsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJGN0cmwuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkY3RybC5kaXNtaXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zYXZlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2F2ZSB2aXNpdG9yJywgJGN0cmwudmlzaXRvcik7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCdhcGkvdmlzaXRvcicsICRjdHJsLnZpc2l0b3IpLnRoZW4oZnVuY3Rpb24gKHIpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRjdHJsLnZpc2l0b3IsIHIuZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAkY3RybC5tb2RhbEluc3RhbmNlLmNsb3NlKCRjdHJsLnZpc2l0b3IpO1xyXG4gICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdzb21ldGhpbmcgd2VudCB3cm9uZycsIGVyci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndmlzaXRvckVkaXQnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgIGl0ZW06ICc8JyxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6ICc8JyxcclxuICAgICAgICAgICAgICAgIGNsb3NlOiAnJicsXHJcbiAgICAgICAgICAgICAgICBkaXNtaXNzOiAnJicsXHJcbiAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiAnPCdcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlzaXRvcnMvdmlzaXRvci1lZGl0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsIGNvbnRyb2xsZXJdXHJcbiAgICAgICAgfSk7XHJcbn1cclxuKSgpOyIsIi8vdmlzaXRvci1saXN0LmNvbXBvbmVudC5qc1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIG1vZHVsZSA9IGFuZ3VsYXIubW9kdWxlKCdhcHAnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb250cm9sbGVyKCRodHRwLCAkbW9kYWwpIHtcclxuICAgICAgICB2YXIgJGN0cmwgPSB0aGlzOyBcclxuICAgICAgICB2YXIgcGFnZVNpemVEZWZhdWx0ID0gMTA7XHJcbiAgICAgICAgdmFyIHRhYmxlU3RhdGVSZWY7XHJcblxyXG4gICAgICAgICRjdHJsLnNlYXJjaE1vZGVsID0ge1xyXG4gICAgICAgICAgICBwYWdlOiAxLFxyXG4gICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemVEZWZhdWx0XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJGN0cmwuJG9uSW5pdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaW5pdCB2aXNpdG9yIGxpc3QnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmNyZWF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJG1vZGFsLm9wZW4oe1xyXG4gICAgICAgICAgICAgICAgY29tcG9uZW50OiAndmlzaXRvckVkaXQnLFxyXG4gICAgICAgICAgICAgICAgYmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbEluc3RhbmNlOiBcIjxcIlxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHJlc29sdmU6IHtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICRjdHJsLnZpc2l0b3JzLnVuc2hpZnQocmVzdWx0KTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICRjdHJsLmVkaXQgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ3Zpc2l0b3JFZGl0JyxcclxuICAgICAgICAgICAgICAgIGJpbmRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWxJbnN0YW5jZTogXCI8XCJcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHYuaWRcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzaXplOiAnbWQnXHJcbiAgICAgICAgICAgIH0pLnJlc3VsdC50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKHYsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5kZWxldGUgPSBmdW5jdGlvbih2KSB7XHJcbiAgICAgICAgICAgICRodHRwLmRlbGV0ZSgnYXBpL3Zpc2l0b3IvJyArIHYuaWQpLnRoZW4oZnVuY3Rpb24ocikge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9ICRjdHJsLnZpc2l0b3JzLmluZGV4T2Yodik7XHJcbiAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9ycy5zcGxpY2UoaWR4LCAxKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5zZWFyY2ggPSBmdW5jdGlvbiAodGFibGVTdGF0ZSkge1xyXG4gICAgICAgICAgICB0YWJsZVN0YXRlUmVmID0gdGFibGVTdGF0ZTtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdhcGkvdmlzaXRvcicsIHsgcGFyYW1zOiAkY3RybC5zZWFyY2hNb2RlbCB9KS50aGVuKGZ1bmN0aW9uIChyKSB7XHJcbiAgICAgICAgICAgICAgICAkY3RybC52aXNpdG9ycyA9IHIuZGF0YS5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgJGN0cmwuc2VhcmNoTW9kZWwgPSByLmRhdGE7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgJGN0cmwuc2VhcmNoTW9kZWwucmVzdWx0cztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkY3RybC5wYWdlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJGN0cmwuc2VhcmNoKHRhYmxlU3RhdGVSZWYpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgbW9kdWxlLmNvbXBvbmVudCgndmlzaXRvckxpc3QnLFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvdmlzaXRvcnMvdmlzaXRvci1saXN0LmNvbXBvbmVudC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogWyckaHR0cCcsICckdWliTW9kYWwnLCBjb250cm9sbGVyXVxyXG4gICAgICAgIH0pO1xyXG59XHJcbikoKTsiXX0=
